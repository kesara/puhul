14c14
< <meta content="xml2rfc 3.8.0" name="generator">
---
> <meta content="xml2rfc 3.19.0" name="generator">
22,39c22,35
<   xml2rfc 3.8.0
<     Python 3.6.10
<     appdirs 1.4.4
<     ConfigArgParse 1.2.3
<     google-i18n-address 2.3.5
<     html5lib 1.0.1
<     intervaltree 3.0.2
<     Jinja2 2.11.2
<     kitchen 1.2.6
<     lxml 4.4.2
<     pycairo 1.19.0
<     pycountry 19.8.18
<     pyflakes 2.1.1
<     PyYAML 5.3.1
<     requests 2.22.0
<     setuptools 40.6.2
<     six 1.14.0
<     WeasyPrint 51
---
>   xml2rfc 3.19.0
>     Python 3.11.7
>     ConfigArgParse 1.7
>     google-i18n-address 3.1.0
>     intervaltree 3.1.0
>     Jinja2 3.1.2
>     lxml 5.0.1
>     platformdirs 4.1.0
>     pycountry 23.12.11
>     PyYAML 6.0.1
>     requests 2.31.0
>     setuptools 65.5.0
>     six 1.16.0
>     wcwidth 0.2.13
41c37
< <link href="rfc9002.xml" rel="alternate" type="application/rfc+xml">
---
> <link href="rfc/rfc9002.xml" rel="alternate" type="application/rfc+xml">
51c47
<   commented changes found necssary during the development of the v3
---
>   commented changes found necessary during the development of the v3
60a57,62
> :root {
>   --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
>   --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
>   --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
> }
> 
63d64
<   width: extend-to-zoom;
78c79
<   font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
---
>   font-family: var(--font-sans);
80a82
>   overflow-wrap: break-word;
166a169,177
> svg[font-family~="serif" i], svg [font-family~="serif" i] {
>   font-family: var(--font-serif);
> }
> svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
>   font-family: var(--font-sans);
> }
> svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
>   font-family: var(--font-mono);
> }
181,184d191
<   border: none;
<   /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
<      support flexbox yet.
<   */
185a193
>   border: none;
208a217,219
> ul.ulBare, li.ulBare {
>   margin-left: 0em !important;
> }
260c271
< tt, code, pre, code {
---
> tt, code, pre {
262c273
<   font-family: 'Roboto Mono', monospace;
---
>   font-family: var(--font-mono);
301a313,315
> blockquote > *:last-child {
>   margin-bottom: 0;
> }
391a406,411
> /* Fix PDF info block run off issue */
> @media print {
>   #identifiers dd {
>     float: none;
>   }
> }
493c513
<   font-family: "Noto Sans",Arial,Helvetica,sans-serif;
---
>   font-family: var(--font-sans);
633d652
< 
655a675,677
>   .breakable pre {
>     break-inside: auto;
>   }
723c745
<   /* The follwing is commented out here, but set appropriately by in code, as
---
>   /* The following is commented out here, but set appropriately by in code, as
823c845
< tt, code, pre, code {
---
> tt, code, pre {
828c850
< pre.sourcecode,
---
> .sourcecode pre,
864c886
< /* Make the alternative author contact informatio look less like just another
---
> /* Make the alternative author contact information look less like just another
1045a1068
>   .artwork > pre,
1060c1083
< and increase the contrast between border and odd row background sligthtly */
---
> and increase the contrast between border and odd row background slightly */
1066a1090,1092
> tr {
>   break-inside: avoid;
> }
1086c1112
<   break-before: avoid-page;
---
>   break-before: auto;
1117c1143
< /* Text in compact lists should not get extra bottim margin space,
---
> /* Text in compact lists should not get extra bottom margin space,
1142c1168
< /* Tweak the comact list text */
---
> /* Tweak the compact list text */
1160c1186
< dd > div:first-child > pre.sourcecode,
---
> dd > div.sourcecode:first-child,
1174c1200
< li > p:last-of-type {
---
> li > p:last-of-type:only-child {
1181a1208
>   <script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
1183,1184c1210,1211
< <body>
< <script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
---
> <body class="xml2rfc">
> <script src="metadata.min.js"></script>
1279,1281c1306,1308
< <nav class="toc"><ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.1">
<             <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
---
> <nav class="toc"><ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
>             <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
1283,1284c1310,1311
<           <li class="ulEmpty toc compact" id="section-toc.1-1.2">
<             <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-conventions-and-definitions" class="xref">Conventions and Definitions</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
>             <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-conventions-and-definitions" class="internal xref">Conventions and Definitions</a></p>
1286,1287c1313,1314
<           <li class="ulEmpty toc compact" id="section-toc.1-1.3">
<             <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-design-of-the-quic-transmis" class="xref">Design of the QUIC Transmission Machinery</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
>             <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-design-of-the-quic-transmis" class="internal xref">Design of the QUIC Transmission Machinery</a></p>
1289,1293c1316,1320
<           <li class="ulEmpty toc compact" id="section-toc.1-1.4">
<             <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-relevant-differences-betwee" class="xref">Relevant Differences between QUIC and TCP</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.1">
<                 <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-separate-packet-number-spac" class="xref">Separate Packet Number Spaces</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
>             <p id="section-toc.1-1.4.1"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-relevant-differences-betwee" class="internal xref">Relevant Differences between QUIC and TCP</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
>                 <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="auto internal xref">4.1</a>.  <a href="#name-separate-packet-number-spac" class="internal xref">Separate Packet Number Spaces</a></p>
1295,1296c1322,1323
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.2">
<                 <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-monotonically-increasing-pa" class="xref">Monotonically Increasing Packet Numbers</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
>                 <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="auto internal xref">4.2</a>.  <a href="#name-monotonically-increasing-pa" class="internal xref">Monotonically Increasing Packet Numbers</a></p>
1298,1299c1325,1326
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.3">
<                 <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-clearer-loss-epoch" class="xref">Clearer Loss Epoch</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
>                 <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="auto internal xref">4.3</a>.  <a href="#name-clearer-loss-epoch" class="internal xref">Clearer Loss Epoch</a></p>
1301,1302c1328,1329
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.4">
<                 <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-no-reneging" class="xref">No Reneging</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
>                 <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="auto internal xref">4.4</a>.  <a href="#name-no-reneging" class="internal xref">No Reneging</a></p>
1304,1305c1331,1332
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.5">
<                 <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="xref">4.5</a>.  <a href="#name-more-ack-ranges" class="xref">More ACK Ranges</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.5">
>                 <p id="section-toc.1-1.4.2.5.1"><a href="#section-4.5" class="auto internal xref">4.5</a>.  <a href="#name-more-ack-ranges" class="internal xref">More ACK Ranges</a></p>
1307,1308c1334,1335
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.6">
<                 <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="xref">4.6</a>.  <a href="#name-explicit-correction-for-del" class="xref">Explicit Correction for Delayed Acknowledgments</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.6">
>                 <p id="section-toc.1-1.4.2.6.1"><a href="#section-4.6" class="auto internal xref">4.6</a>.  <a href="#name-explicit-correction-for-del" class="internal xref">Explicit Correction for Delayed Acknowledgments</a></p>
1310,1311c1337,1338
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.7">
<                 <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="xref">4.7</a>.  <a href="#name-probe-timeout-replaces-rto-" class="xref">Probe Timeout Replaces RTO and TLP</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.7">
>                 <p id="section-toc.1-1.4.2.7.1"><a href="#section-4.7" class="auto internal xref">4.7</a>.  <a href="#name-probe-timeout-replaces-rto-" class="internal xref">Probe Timeout Replaces RTO and TLP</a></p>
1313,1314c1340,1341
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.8">
<                 <p id="section-toc.1-1.4.2.8.1"><a href="#section-4.8" class="xref">4.8</a>.  <a href="#name-the-minimum-congestion-wind" class="xref">The Minimum Congestion Window Is Two Packets</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.8">
>                 <p id="section-toc.1-1.4.2.8.1"><a href="#section-4.8" class="auto internal xref">4.8</a>.  <a href="#name-the-minimum-congestion-wind" class="internal xref">The Minimum Congestion Window Is Two Packets</a></p>
1316,1317c1343,1344
<               <li class="ulEmpty toc compact" id="section-toc.1-1.4.2.9">
<                 <p id="section-toc.1-1.4.2.9.1"><a href="#section-4.9" class="xref">4.9</a>.  <a href="#name-handshake-packets-are-not-s" class="xref">Handshake Packets Are Not Special</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.9">
>                 <p id="section-toc.1-1.4.2.9.1"><a href="#section-4.9" class="auto internal xref">4.9</a>.  <a href="#name-handshake-packets-are-not-s" class="internal xref">Handshake Packets Are Not Special</a></p>
1321,1325c1348,1352
<           <li class="ulEmpty toc compact" id="section-toc.1-1.5">
<             <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-estimating-the-round-trip-t" class="xref">Estimating the Round-Trip Time</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.5.2.1">
<                 <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-generating-rtt-samples" class="xref">Generating RTT Samples</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
>             <p id="section-toc.1-1.5.1"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-estimating-the-round-trip-t" class="internal xref">Estimating the Round-Trip Time</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
>                 <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-generating-rtt-samples" class="internal xref">Generating RTT Samples</a></p>
1327,1328c1354,1355
<               <li class="ulEmpty toc compact" id="section-toc.1-1.5.2.2">
<                 <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-estimating-min_rtt" class="xref">Estimating min_rtt</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
>                 <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-estimating-min_rtt" class="internal xref">Estimating min_rtt</a></p>
1330,1331c1357,1358
<               <li class="ulEmpty toc compact" id="section-toc.1-1.5.2.3">
<                 <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-estimating-smoothed_rtt-and" class="xref">Estimating smoothed_rtt and rttvar</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
>                 <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-estimating-smoothed_rtt-and" class="internal xref">Estimating smoothed_rtt and rttvar</a></p>
1335,1342c1362,1369
<           <li class="ulEmpty toc compact" id="section-toc.1-1.6">
<             <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-loss-detection" class="xref">Loss Detection</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.1">
<                 <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-acknowledgment-based-detect" class="xref">Acknowledgment-Based Detection</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.1.2.1">
<                     <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="xref">6.1.1</a>.  <a href="#name-packet-threshold" class="xref">Packet Threshold</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
>             <p id="section-toc.1-1.6.1"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-loss-detection" class="internal xref">Loss Detection</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
>                 <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="auto internal xref">6.1</a>.  <a href="#name-acknowledgment-based-detect" class="internal xref">Acknowledgment-Based Detection</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.1">
>                     <p id="section-toc.1-1.6.2.1.2.1.1"><a href="#section-6.1.1" class="auto internal xref">6.1.1</a>.  <a href="#name-packet-threshold" class="internal xref">Packet Threshold</a></p>
1344,1345c1371,1372
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.1.2.2">
<                     <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="xref">6.1.2</a>.  <a href="#name-time-threshold" class="xref">Time Threshold</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1.2.2">
>                     <p id="section-toc.1-1.6.2.1.2.2.1"><a href="#section-6.1.2" class="auto internal xref">6.1.2</a>.  <a href="#name-time-threshold" class="internal xref">Time Threshold</a></p>
1349,1353c1376,1380
<               <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.2">
<                 <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-probe-timeout" class="xref">Probe Timeout</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.2.2.1">
<                     <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-computing-pto" class="xref">Computing PTO</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
>                 <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="auto internal xref">6.2</a>.  <a href="#name-probe-timeout" class="internal xref">Probe Timeout</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
>                     <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="auto internal xref">6.2.1</a>.  <a href="#name-computing-pto" class="internal xref">Computing PTO</a></p>
1355,1356c1382,1383
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.2.2.2">
<                     <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="xref">6.2.2</a>.  <a href="#name-handshakes-and-new-paths" class="xref">Handshakes and New Paths</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.2">
>                     <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="auto internal xref">6.2.2</a>.  <a href="#name-handshakes-and-new-paths" class="internal xref">Handshakes and New Paths</a></p>
1358,1359c1385,1386
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.2.2.3">
<                     <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="xref">6.2.3</a>.  <a href="#name-speeding-up-handshake-compl" class="xref">Speeding up Handshake Completion</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.3">
>                     <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="auto internal xref">6.2.3</a>.  <a href="#name-speeding-up-handshake-compl" class="internal xref">Speeding up Handshake Completion</a></p>
1361,1362c1388,1389
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.2.2.4">
<                     <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="xref">6.2.4</a>.  <a href="#name-sending-probe-packets" class="xref">Sending Probe Packets</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.4">
>                     <p id="section-toc.1-1.6.2.2.2.4.1"><a href="#section-6.2.4" class="auto internal xref">6.2.4</a>.  <a href="#name-sending-probe-packets" class="internal xref">Sending Probe Packets</a></p>
1366,1367c1393,1394
<               <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.3">
<                 <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-handling-retry-packets" class="xref">Handling Retry Packets</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
>                 <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="auto internal xref">6.3</a>.  <a href="#name-handling-retry-packets" class="internal xref">Handling Retry Packets</a></p>
1369,1370c1396,1397
<               <li class="ulEmpty toc compact" id="section-toc.1-1.6.2.4">
<                 <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-discarding-keys-and-packet-" class="xref">Discarding Keys and Packet State</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
>                 <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="auto internal xref">6.4</a>.  <a href="#name-discarding-keys-and-packet-" class="internal xref">Discarding Keys and Packet State</a></p>
1374,1378c1401,1405
<           <li class="ulEmpty toc compact" id="section-toc.1-1.7">
<             <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-congestion-control" class="xref">Congestion Control</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.1">
<                 <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-explicit-congestion-notific" class="xref">Explicit Congestion Notification</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
>             <p id="section-toc.1-1.7.1"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-congestion-control" class="internal xref">Congestion Control</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
>                 <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="auto internal xref">7.1</a>.  <a href="#name-explicit-congestion-notific" class="internal xref">Explicit Congestion Notification</a></p>
1380,1381c1407,1408
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.2">
<                 <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-initial-and-minimum-congest" class="xref">Initial and Minimum Congestion Window</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
>                 <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="auto internal xref">7.2</a>.  <a href="#name-initial-and-minimum-congest" class="internal xref">Initial and Minimum Congestion Window</a></p>
1383,1387c1410,1414
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.3">
<                 <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="xref">7.3</a>.  <a href="#name-congestion-control-states" class="xref">Congestion Control States</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.3.2.1">
<                     <p id="section-toc.1-1.7.2.3.2.1.1"><a href="#section-7.3.1" class="xref">7.3.1</a>.  <a href="#name-slow-start" class="xref">Slow Start</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3">
>                 <p id="section-toc.1-1.7.2.3.1"><a href="#section-7.3" class="auto internal xref">7.3</a>.  <a href="#name-congestion-control-states" class="internal xref">Congestion Control States</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3.2.1">
>                     <p id="section-toc.1-1.7.2.3.2.1.1"><a href="#section-7.3.1" class="auto internal xref">7.3.1</a>.  <a href="#name-slow-start" class="internal xref">Slow Start</a></p>
1389,1390c1416,1417
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.3.2.2">
<                     <p id="section-toc.1-1.7.2.3.2.2.1"><a href="#section-7.3.2" class="xref">7.3.2</a>.  <a href="#name-recovery" class="xref">Recovery</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3.2.2">
>                     <p id="section-toc.1-1.7.2.3.2.2.1"><a href="#section-7.3.2" class="auto internal xref">7.3.2</a>.  <a href="#name-recovery" class="internal xref">Recovery</a></p>
1392,1393c1419,1420
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.3.2.3">
<                     <p id="section-toc.1-1.7.2.3.2.3.1"><a href="#section-7.3.3" class="xref">7.3.3</a>.  <a href="#name-congestion-avoidance" class="xref">Congestion Avoidance</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.3.2.3">
>                     <p id="section-toc.1-1.7.2.3.2.3.1"><a href="#section-7.3.3" class="auto internal xref">7.3.3</a>.  <a href="#name-congestion-avoidance" class="internal xref">Congestion Avoidance</a></p>
1397,1398c1424,1425
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.4">
<                 <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="xref">7.4</a>.  <a href="#name-ignoring-loss-of-undecrypta" class="xref">Ignoring Loss of Undecryptable Packets</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.4">
>                 <p id="section-toc.1-1.7.2.4.1"><a href="#section-7.4" class="auto internal xref">7.4</a>.  <a href="#name-ignoring-loss-of-undecrypta" class="internal xref">Ignoring Loss of Undecryptable Packets</a></p>
1400,1401c1427,1428
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.5">
<                 <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="xref">7.5</a>.  <a href="#name-probe-timeout-2" class="xref">Probe Timeout</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.5">
>                 <p id="section-toc.1-1.7.2.5.1"><a href="#section-7.5" class="auto internal xref">7.5</a>.  <a href="#name-probe-timeout-2" class="internal xref">Probe Timeout</a></p>
1403,1407c1430,1434
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.6">
<                 <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="xref">7.6</a>.  <a href="#name-persistent-congestion" class="xref">Persistent Congestion</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.6.2.1">
<                     <p id="section-toc.1-1.7.2.6.2.1.1"><a href="#section-7.6.1" class="xref">7.6.1</a>.  <a href="#name-duration" class="xref">Duration</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6">
>                 <p id="section-toc.1-1.7.2.6.1"><a href="#section-7.6" class="auto internal xref">7.6</a>.  <a href="#name-persistent-congestion" class="internal xref">Persistent Congestion</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6.2.1">
>                     <p id="section-toc.1-1.7.2.6.2.1.1"><a href="#section-7.6.1" class="auto internal xref">7.6.1</a>.  <a href="#name-duration" class="internal xref">Duration</a></p>
1409,1410c1436,1437
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.6.2.2">
<                     <p id="section-toc.1-1.7.2.6.2.2.1"><a href="#section-7.6.2" class="xref">7.6.2</a>.  <a href="#name-establishing-persistent-con" class="xref">Establishing Persistent Congestion</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6.2.2">
>                     <p id="section-toc.1-1.7.2.6.2.2.1"><a href="#section-7.6.2" class="auto internal xref">7.6.2</a>.  <a href="#name-establishing-persistent-con" class="internal xref">Establishing Persistent Congestion</a></p>
1412,1413c1439,1440
<                   <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.6.2.3">
<                     <p id="section-toc.1-1.7.2.6.2.3.1"><a href="#section-7.6.3" class="xref">7.6.3</a>.  <a href="#name-example" class="xref">Example</a></p>
---
>                   <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.6.2.3">
>                     <p id="section-toc.1-1.7.2.6.2.3.1"><a href="#section-7.6.3" class="auto internal xref">7.6.3</a>.  <a href="#name-example" class="internal xref">Example</a></p>
1417,1418c1444,1445
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.7">
<                 <p id="section-toc.1-1.7.2.7.1"><a href="#section-7.7" class="xref">7.7</a>.  <a href="#name-pacing" class="xref">Pacing</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.7">
>                 <p id="section-toc.1-1.7.2.7.1"><a href="#section-7.7" class="auto internal xref">7.7</a>.  <a href="#name-pacing" class="internal xref">Pacing</a></p>
1420,1421c1447,1448
<               <li class="ulEmpty toc compact" id="section-toc.1-1.7.2.8">
<                 <p id="section-toc.1-1.7.2.8.1"><a href="#section-7.8" class="xref">7.8</a>.  <a href="#name-underutilizing-the-congesti" class="xref">Underutilizing the Congestion Window</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.8">
>                 <p id="section-toc.1-1.7.2.8.1"><a href="#section-7.8" class="auto internal xref">7.8</a>.  <a href="#name-underutilizing-the-congesti" class="internal xref">Underutilizing the Congestion Window</a></p>
1425,1429c1452,1456
<           <li class="ulEmpty toc compact" id="section-toc.1-1.8">
<             <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.8.2.1">
<                 <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-loss-and-congestion-signals" class="xref">Loss and Congestion Signals</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
>             <p id="section-toc.1-1.8.1"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
>                 <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="auto internal xref">8.1</a>.  <a href="#name-loss-and-congestion-signals" class="internal xref">Loss and Congestion Signals</a></p>
1431,1432c1458,1459
<               <li class="ulEmpty toc compact" id="section-toc.1-1.8.2.2">
<                 <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-traffic-analysis" class="xref">Traffic Analysis</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
>                 <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="auto internal xref">8.2</a>.  <a href="#name-traffic-analysis" class="internal xref">Traffic Analysis</a></p>
1434,1435c1461,1462
<               <li class="ulEmpty toc compact" id="section-toc.1-1.8.2.3">
<                 <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-misreporting-ecn-markings" class="xref">Misreporting ECN Markings</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.3">
>                 <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="auto internal xref">8.3</a>.  <a href="#name-misreporting-ecn-markings" class="internal xref">Misreporting ECN Markings</a></p>
1439,1443c1466,1470
<           <li class="ulEmpty toc compact" id="section-toc.1-1.9">
<             <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.9.2.1">
<                 <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
>             <p id="section-toc.1-1.9.1"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-references" class="internal xref">References</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
>                 <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="auto internal xref">9.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
1445,1446c1472,1473
<               <li class="ulEmpty toc compact" id="section-toc.1-1.9.2.2">
<                 <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
>                 <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="auto internal xref">9.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
1450,1457c1477,1484
<           <li class="ulEmpty toc compact" id="section-toc.1-1.10">
<             <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-loss-recovery-pseudocode" class="xref">Loss Recovery Pseudocode</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.1">
<                 <p id="section-toc.1-1.10.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-tracking-sent-packets" class="xref">Tracking Sent Packets</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.1.2.1">
<                     <p id="section-toc.1-1.10.2.1.2.1.1"><a href="#section-a.1.1" class="xref">A.1.1</a>.  <a href="#name-sent-packet-fields" class="xref">Sent Packet Fields</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
>             <p id="section-toc.1-1.10.1"><a href="#appendix-A" class="auto internal xref">Appendix A</a>.  <a href="#name-loss-recovery-pseudocode" class="internal xref">Loss Recovery Pseudocode</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
>                 <p id="section-toc.1-1.10.2.1.1"><a href="#appendix-A.1" class="auto internal xref">A.1</a>.  <a href="#name-tracking-sent-packets" class="internal xref">Tracking Sent Packets</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1.2.1">
>                     <p id="section-toc.1-1.10.2.1.2.1.1"><a href="#appendix-A.1.1" class="auto internal xref">A.1.1</a>.  <a href="#name-sent-packet-fields" class="internal xref">Sent Packet Fields</a></p>
1461,1462c1488,1489
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.2">
<                 <p id="section-toc.1-1.10.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-constants-of-interest" class="xref">Constants of Interest</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
>                 <p id="section-toc.1-1.10.2.2.1"><a href="#appendix-A.2" class="auto internal xref">A.2</a>.  <a href="#name-constants-of-interest" class="internal xref">Constants of Interest</a></p>
1464,1465c1491,1492
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.3">
<                 <p id="section-toc.1-1.10.2.3.1"><a href="#section-a.3" class="xref">A.3</a>.  <a href="#name-variables-of-interest" class="xref">Variables of Interest</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
>                 <p id="section-toc.1-1.10.2.3.1"><a href="#appendix-A.3" class="auto internal xref">A.3</a>.  <a href="#name-variables-of-interest" class="internal xref">Variables of Interest</a></p>
1467,1468c1494,1495
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.4">
<                 <p id="section-toc.1-1.10.2.4.1"><a href="#section-a.4" class="xref">A.4</a>.  <a href="#name-initialization" class="xref">Initialization</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
>                 <p id="section-toc.1-1.10.2.4.1"><a href="#appendix-A.4" class="auto internal xref">A.4</a>.  <a href="#name-initialization" class="internal xref">Initialization</a></p>
1470,1471c1497,1498
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.5">
<                 <p id="section-toc.1-1.10.2.5.1"><a href="#section-a.5" class="xref">A.5</a>.  <a href="#name-on-sending-a-packet" class="xref">On Sending a Packet</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.5">
>                 <p id="section-toc.1-1.10.2.5.1"><a href="#appendix-A.5" class="auto internal xref">A.5</a>.  <a href="#name-on-sending-a-packet" class="internal xref">On Sending a Packet</a></p>
1473,1474c1500,1501
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.6">
<                 <p id="section-toc.1-1.10.2.6.1"><a href="#section-a.6" class="xref">A.6</a>.  <a href="#name-on-receiving-a-datagram" class="xref">On Receiving a Datagram</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.6">
>                 <p id="section-toc.1-1.10.2.6.1"><a href="#appendix-A.6" class="auto internal xref">A.6</a>.  <a href="#name-on-receiving-a-datagram" class="internal xref">On Receiving a Datagram</a></p>
1476,1477c1503,1504
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.7">
<                 <p id="section-toc.1-1.10.2.7.1"><a href="#section-a.7" class="xref">A.7</a>.  <a href="#name-on-receiving-an-acknowledgm" class="xref">On Receiving an Acknowledgment</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.7">
>                 <p id="section-toc.1-1.10.2.7.1"><a href="#appendix-A.7" class="auto internal xref">A.7</a>.  <a href="#name-on-receiving-an-acknowledgm" class="internal xref">On Receiving an Acknowledgment</a></p>
1479,1480c1506,1507
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.8">
<                 <p id="section-toc.1-1.10.2.8.1"><a href="#section-a.8" class="xref">A.8</a>.  <a href="#name-setting-the-loss-detection-" class="xref">Setting the Loss Detection Timer</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.8">
>                 <p id="section-toc.1-1.10.2.8.1"><a href="#appendix-A.8" class="auto internal xref">A.8</a>.  <a href="#name-setting-the-loss-detection-" class="internal xref">Setting the Loss Detection Timer</a></p>
1482,1483c1509,1510
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.9">
<                 <p id="section-toc.1-1.10.2.9.1"><a href="#section-a.9" class="xref">A.9</a>.  <a href="#name-on-timeout" class="xref">On Timeout</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.9">
>                 <p id="section-toc.1-1.10.2.9.1"><a href="#appendix-A.9" class="auto internal xref">A.9</a>.  <a href="#name-on-timeout" class="internal xref">On Timeout</a></p>
1485,1486c1512,1513
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.10">
<                 <p id="section-toc.1-1.10.2.10.1"><a href="#section-a.10" class="xref">A.10</a>. <a href="#name-detecting-lost-packets" class="xref">Detecting Lost Packets</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.10">
>                 <p id="section-toc.1-1.10.2.10.1"><a href="#appendix-A.10" class="auto internal xref">A.10</a>. <a href="#name-detecting-lost-packets" class="internal xref">Detecting Lost Packets</a></p>
1488,1489c1515,1516
<               <li class="ulEmpty toc compact" id="section-toc.1-1.10.2.11">
<                 <p id="section-toc.1-1.10.2.11.1"><a href="#section-a.11" class="xref">A.11</a>. <a href="#name-upon-dropping-initial-or-ha" class="xref">Upon Dropping Initial or Handshake Keys</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.11">
>                 <p id="section-toc.1-1.10.2.11.1"><a href="#appendix-A.11" class="auto internal xref">A.11</a>. <a href="#name-upon-dropping-initial-or-ha" class="internal xref">Upon Dropping Initial or Handshake Keys</a></p>
1493,1497c1520,1524
<           <li class="ulEmpty toc compact" id="section-toc.1-1.11">
<             <p id="section-toc.1-1.11.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-congestion-control-pseudoco" class="xref">Congestion Control Pseudocode</a></p>
< <ul class="ulEmpty toc compact">
< <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.1">
<                 <p id="section-toc.1-1.11.2.1.1"><a href="#section-b.1" class="xref">B.1</a>.  <a href="#name-constants-of-interest-2" class="xref">Constants of Interest</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
>             <p id="section-toc.1-1.11.1"><a href="#appendix-B" class="auto internal xref">Appendix B</a>.  <a href="#name-congestion-control-pseudoco" class="internal xref">Congestion Control Pseudocode</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
>                 <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-B.1" class="auto internal xref">B.1</a>.  <a href="#name-constants-of-interest-2" class="internal xref">Constants of Interest</a></p>
1499,1500c1526,1527
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.2">
<                 <p id="section-toc.1-1.11.2.2.1"><a href="#section-b.2" class="xref">B.2</a>.  <a href="#name-variables-of-interest-2" class="xref">Variables of Interest</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
>                 <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-B.2" class="auto internal xref">B.2</a>.  <a href="#name-variables-of-interest-2" class="internal xref">Variables of Interest</a></p>
1502,1503c1529,1530
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.3">
<                 <p id="section-toc.1-1.11.2.3.1"><a href="#section-b.3" class="xref">B.3</a>.  <a href="#name-initialization-2" class="xref">Initialization</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
>                 <p id="section-toc.1-1.11.2.3.1"><a href="#appendix-B.3" class="auto internal xref">B.3</a>.  <a href="#name-initialization-2" class="internal xref">Initialization</a></p>
1505,1506c1532,1533
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.4">
<                 <p id="section-toc.1-1.11.2.4.1"><a href="#section-b.4" class="xref">B.4</a>.  <a href="#name-on-packet-sent" class="xref">On Packet Sent</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.4">
>                 <p id="section-toc.1-1.11.2.4.1"><a href="#appendix-B.4" class="auto internal xref">B.4</a>.  <a href="#name-on-packet-sent" class="internal xref">On Packet Sent</a></p>
1508,1509c1535,1536
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.5">
<                 <p id="section-toc.1-1.11.2.5.1"><a href="#section-b.5" class="xref">B.5</a>.  <a href="#name-on-packet-acknowledgment" class="xref">On Packet Acknowledgment</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.5">
>                 <p id="section-toc.1-1.11.2.5.1"><a href="#appendix-B.5" class="auto internal xref">B.5</a>.  <a href="#name-on-packet-acknowledgment" class="internal xref">On Packet Acknowledgment</a></p>
1511,1512c1538,1539
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.6">
<                 <p id="section-toc.1-1.11.2.6.1"><a href="#section-b.6" class="xref">B.6</a>.  <a href="#name-on-new-congestion-event" class="xref">On New Congestion Event</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.6">
>                 <p id="section-toc.1-1.11.2.6.1"><a href="#appendix-B.6" class="auto internal xref">B.6</a>.  <a href="#name-on-new-congestion-event" class="internal xref">On New Congestion Event</a></p>
1514,1515c1541,1542
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.7">
<                 <p id="section-toc.1-1.11.2.7.1"><a href="#section-b.7" class="xref">B.7</a>.  <a href="#name-process-ecn-information" class="xref">Process ECN Information</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.7">
>                 <p id="section-toc.1-1.11.2.7.1"><a href="#appendix-B.7" class="auto internal xref">B.7</a>.  <a href="#name-process-ecn-information" class="internal xref">Process ECN Information</a></p>
1517,1518c1544,1545
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.8">
<                 <p id="section-toc.1-1.11.2.8.1"><a href="#section-b.8" class="xref">B.8</a>.  <a href="#name-on-packets-lost" class="xref">On Packets Lost</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.8">
>                 <p id="section-toc.1-1.11.2.8.1"><a href="#appendix-B.8" class="auto internal xref">B.8</a>.  <a href="#name-on-packets-lost" class="internal xref">On Packets Lost</a></p>
1520,1521c1547,1548
<               <li class="ulEmpty toc compact" id="section-toc.1-1.11.2.9">
<                 <p id="section-toc.1-1.11.2.9.1"><a href="#section-b.9" class="xref">B.9</a>.  <a href="#name-removing-discarded-packets-" class="xref">Removing Discarded Packets from Bytes in Flight</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.9">
>                 <p id="section-toc.1-1.11.2.9.1"><a href="#appendix-B.9" class="auto internal xref">B.9</a>.  <a href="#name-removing-discarded-packets-" class="internal xref">Removing Discarded Packets from Bytes in Flight</a></p>
1525,1526c1552,1553
<           <li class="ulEmpty toc compact" id="section-toc.1-1.12">
<             <p id="section-toc.1-1.12.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-contributors" class="xref">Contributors</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
>             <p id="section-toc.1-1.12.1"><a href="#appendix-C" class="auto internal xref"></a><a href="#name-contributors" class="internal xref">Contributors</a></p>
1528,1529c1555,1556
<           <li class="ulEmpty toc compact" id="section-toc.1-1.13">
<             <p id="section-toc.1-1.13.1"><a href="#section-appendix.d" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
>             <p id="section-toc.1-1.13.1"><a href="#appendix-D" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
1541c1568
< <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. This document describes loss detection and congestion
---
> <span>[<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. This document describes loss detection and congestion
1552c1579
< document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
---
> document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span>
1586c1613
< described in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-12.3" class="relref">Section 12.3</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.  Packet numbers never repeat
---
> described in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-12.3" class="relref">Section 12.3</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.  Packet numbers never repeat
1646c1673
< <span>[<a href="#RETRANSMISSION" class="xref">RETRANSMISSION</a>]</span>.  QUIC separates transmission order from delivery order:
---
> <span>[<a href="#RETRANSMISSION" class="cite xref">RETRANSMISSION</a>]</span>.  QUIC separates transmission order from delivery order:
1685c1712
< Acknowledgments (SACKs) <span>[<a href="#RFC2018" class="xref">RFC2018</a>]</span>. However, QUIC does not allow a packet
---
> Acknowledgments (SACKs) <span>[<a href="#RFC2018" class="cite xref">RFC2018</a>]</span>. However, QUIC does not allow a packet
1707c1734
< more accurate RTT estimate; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
---
> more accurate RTT estimate; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-4.6-1" class="pilcrow">¶</a></p>
1715,1716c1742,1743
< <p id="section-4.7-1">QUIC uses a probe timeout (PTO; see <a href="#pto" class="xref">Section 6.2</a>), with a timer based on TCP's
< retransmission timeout (RTO) computation; see <span>[<a href="#RFC6298" class="xref">RFC6298</a>]</span>.  QUIC's PTO includes
---
> <p id="section-4.7-1">QUIC uses a probe timeout (PTO; see <a href="#pto" class="auto internal xref">Section 6.2</a>), with a timer based on TCP's
> retransmission timeout (RTO) computation; see <span>[<a href="#RFC6298" class="cite xref">RFC6298</a>]</span>.  QUIC's PTO includes
1719c1746
< <p id="section-4.7-2">Similar to the RACK-TLP loss detection algorithm for TCP <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span>, QUIC does
---
> <p id="section-4.7-2">Similar to the RACK-TLP loss detection algorithm for TCP <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span>, QUIC does
1723c1750
< <a href="#persistent-congestion" class="xref">Section 7.6</a>. In doing this, QUIC avoids unnecessary congestion
---
> <a href="#persistent-congestion" class="auto internal xref">Section 7.6</a>. In doing this, QUIC avoids unnecessary congestion
1725c1752
< RTO-Recovery (F-RTO) <span>[<a href="#RFC5682" class="xref">RFC5682</a>]</span>. Since QUIC does not collapse the congestion
---
> RTO-Recovery (F-RTO) <span>[<a href="#RFC5682" class="cite xref">RFC5682</a>]</span>. Since QUIC does not collapse the congestion
1741c1768
< packet means that the sender needs to wait for a PTO to recover (<a href="#pto" class="xref">Section 6.2</a>), which
---
> packet means that the sender needs to wait for a PTO to recover (<a href="#pto" class="auto internal xref">Section 6.2</a>), which
1748c1775
< congestion (<a href="#pto" class="xref">Section 6.2</a>).<a href="#section-4.8-2" class="pilcrow">¶</a></p>
---
> congestion (<a href="#pto" class="auto internal xref">Section 6.2</a>).<a href="#section-4.8-2" class="pilcrow">¶</a></p>
1757c1784
< reduces the congestion window to one packet; see <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>. QUIC treats loss
---
> reduces the congestion window to one packet; see <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>. QUIC treats loss
1770c1797
< peer-reported host delays (see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>) to generate a
---
> peer-reported host delays (see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>) to generate a
1791,1792c1818,1819
< <div id="section-5.1-4">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-5.1-4">
> <pre>
1801c1828
< (<a href="#smoothed-rtt" class="xref">Section 5.3</a>).<a href="#section-5.1-5" class="pilcrow">¶</a></p>
---
> (<a href="#smoothed-rtt" class="auto internal xref">Section 5.3</a>).<a href="#section-5.1-5" class="pilcrow">¶</a></p>
1813c1840
< are received within an RTT.  As suggested in <span>[<a href="#RFC6298" class="xref">RFC6298</a>]</span>, doing so might result
---
> are received within an RTT.  As suggested in <span>[<a href="#RFC6298" class="cite xref">RFC6298</a>]</span>, doing so might result
1827c1854
< set to the lesser of min_rtt and latest_rtt (<a href="#latest-rtt" class="xref">Section 5.1</a>) on all other
---
> set to the lesser of min_rtt and latest_rtt (<a href="#latest-rtt" class="auto internal xref">Section 5.1</a>) on all other
1832c1859
< observes (see <a href="#smoothed-rtt" class="xref">Section 5.3</a>) and limits potential underestimation due to
---
> observes (see <a href="#smoothed-rtt" class="auto internal xref">Section 5.3</a>) and limits potential underestimation due to
1843c1870
< see <a href="#smoothed-rtt" class="xref">Section 5.3</a>.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
---
> see <a href="#smoothed-rtt" class="auto internal xref">Section 5.3</a>.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
1861c1888
< ACK frames as described in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-19.3" class="relref">Section 19.3</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
---
> ACK frames as described in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-19.3" class="relref">Section 19.3</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
1863c1890
< max_ack_delay during the handshake (<span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>). To
---
> max_ack_delay during the handshake (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>). To
1865c1892
< is confirmed, as defined in <span><a href="https://www.rfc-editor.org/rfc/rfc9001#section-4.1.2" class="relref">Section 4.1.2</a> of [<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>. When they occur,
---
> is confirmed, as defined in <span><a href="https://rfc-editor.org/rfc/rfc9001#section-4.1.2" class="relref">Section 4.1.2</a> of [<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span>. When they occur,
1886c1913
< acknowledgments are not delayed by the peer (<span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>);<a href="#section-5.3-7.1" class="pilcrow">¶</a>
---
> acknowledgments are not delayed by the peer (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>);<a href="#section-5.3-7.1" class="pilcrow">¶</a>
1907c1934
< <p id="section-5.3-9">Similar to <span>[<a href="#RFC6298" class="xref">RFC6298</a>]</span>, smoothed_rtt and rttvar are computed as follows.<a href="#section-5.3-9" class="pilcrow">¶</a></p>
---
> <p id="section-5.3-9">Similar to <span>[<a href="#RFC6298" class="cite xref">RFC6298</a>]</span>, smoothed_rtt and rttvar are computed as follows.<a href="#section-5.3-9" class="pilcrow">¶</a></p>
1909c1936
< when the estimator is reset during connection migration; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. Before any RTT samples are available for a new path or when
---
> when the estimator is reset during connection migration; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. Before any RTT samples are available for a new path or when
1911c1938
< <a href="#pto-handshake" class="xref">Section 6.2.2</a>.<a href="#section-5.3-10" class="pilcrow">¶</a></p>
---
> <a href="#pto-handshake" class="auto internal xref">Section 6.2.2</a>.<a href="#section-5.3-10" class="pilcrow">¶</a></p>
1914,1915c1941,1942
< <div id="section-5.3-12">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-5.3-12">
> <pre>
1921c1948
< <a href="#latest-rtt" class="xref">Section 5.1</a>. On the first RTT sample after initialization, the estimator is
---
> <a href="#latest-rtt" class="auto internal xref">Section 5.1</a>. On the first RTT sample after initialization, the estimator is
1924c1951
< current path, as described in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-5.3-13" class="pilcrow">¶</a></p>
---
> current path, as described in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-5.3-13" class="pilcrow">¶</a></p>
1927,1928c1954,1955
< <div id="section-5.3-15">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-5.3-15">
> <pre>
1934,1935c1961,1962
< <div id="section-5.3-17">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-5.3-17">
> <pre>
1957c1984
< acknowledgments are received; see <a href="#pto" class="xref">Section 6.2</a>. This section provides a description
---
> acknowledgments are received; see <a href="#pto" class="auto internal xref">Section 6.2</a>. This section provides a description
1961c1988
< frame.  For more information, see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6-2" class="pilcrow">¶</a></p>
---
> frame.  For more information, see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6-2" class="pilcrow">¶</a></p>
1971,1972c1998,1999
< Retransmit <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>, Early Retransmit <span>[<a href="#RFC5827" class="xref">RFC5827</a>]</span>, Forward Acknowledgment
< <span>[<a href="#FACK" class="xref">FACK</a>]</span>, SACK loss recovery <span>[<a href="#RFC6675" class="xref">RFC6675</a>]</span>, and RACK-TLP <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span>. This
---
> Retransmit <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>, Early Retransmit <span>[<a href="#RFC5827" class="cite xref">RFC5827</a>]</span>, Forward Acknowledgment
> <span>[<a href="#FACK" class="cite xref">FACK</a>]</span>, SACK loss recovery <span>[<a href="#RFC6675" class="cite xref">RFC6675</a>]</span>, and RACK-TLP <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span>. This
1980,1981c2007,2008
< (<a href="#packet-threshold" class="xref">Section 6.1.1</a>), or it was sent long enough in the past
< (<a href="#time-threshold" class="xref">Section 6.1.2</a>).<a href="#section-6.1-3.2" class="pilcrow">¶</a>
---
> (<a href="#packet-threshold" class="auto internal xref">Section 6.1.1</a>), or it was sent long enough in the past
> (<a href="#time-threshold" class="auto internal xref">Section 6.1.2</a>).<a href="#section-6.1-3.2" class="pilcrow">¶</a>
2000,2001c2027,2028
< <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span> <span>[<a href="#RFC6675" class="xref">RFC6675</a>]</span>.  In order to remain similar to TCP,
< implementations <span class="bcp14">SHOULD NOT</span> use a packet threshold less than 3; see <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>.<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
---
> <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span> <span>[<a href="#RFC6675" class="cite xref">RFC6675</a>]</span>.  In order to remain similar to TCP,
> implementations <span class="bcp14">SHOULD NOT</span> use a packet threshold less than 3; see <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>.<a href="#section-6.1.1-1" class="pilcrow">¶</a></p>
2007c2034
< detecting losses, such as RACK <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span>, have proven to be useful in TCP and
---
> detecting losses, such as RACK <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span>, have proven to be useful in TCP and
2021,2022c2048,2049
< <div id="section-6.1.2-2">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-6.1.2-2">
> <pre>
2042c2069
<             <p id="section-6.1.2-7.1">Note: TCP's RACK <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span> specifies a slightly larger threshold, equivalent
---
>             <p id="section-6.1.2-7.1">Note: TCP's RACK <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span> specifies a slightly larger threshold, equivalent
2067c2094
< by the packet and time threshold mechanisms; see <a href="#ack-loss-detection" class="xref">Section 6.1</a>.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
---
> by the packet and time threshold mechanisms; see <a href="#ack-loss-detection" class="auto internal xref">Section 6.1</a>.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
2069,2070c2096,2097
< Probe <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span>, RTO <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>, and F-RTO algorithms for TCP
< <span>[<a href="#RFC5682" class="xref">RFC5682</a>]</span>. The timeout computation is based on TCP's RTO period <span>[<a href="#RFC6298" class="xref">RFC6298</a>]</span>.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
---
> Probe <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span>, RTO <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>, and F-RTO algorithms for TCP
> <span>[<a href="#RFC5682" class="cite xref">RFC5682</a>]</span>. The timeout computation is based on TCP's RTO period <span>[<a href="#RFC6298" class="cite xref">RFC6298</a>]</span>.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
2078,2079c2105,2106
< <div id="section-6.2.1-2">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-6.2.1-2">
> <pre>
2090c2117
< expected to not delay these packets intentionally; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6.2.1-4" class="pilcrow">¶</a></p>
---
> expected to not delay these packets intentionally; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2.1" class="relref">Section 13.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6.2.1-4" class="pilcrow">¶</a></p>
2107c2134
< (<span><a href="https://www.rfc-editor.org/rfc/rfc9001#section-4.9" class="relref">Section 4.9</a> of [<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>). This ensures the PTO is always set based on the
---
> (<span><a href="https://rfc-editor.org/rfc/rfc9001#section-4.9" class="relref">Section 4.9</a> of [<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span>). This ensures the PTO is always set based on the
2128c2155
< loss detection; see <a href="#time-threshold" class="xref">Section 6.1.2</a>.  A timer that is set for time
---
> loss detection; see <a href="#time-threshold" class="auto internal xref">Section 6.1.2</a>.  A timer that is set for time
2142c2169
< TCP's initial RTO; see <span><a href="https://www.rfc-editor.org/rfc/rfc6298#section-2" class="relref">Section 2</a> of [<a href="#RFC6298" class="xref">RFC6298</a>]</span>.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
---
> TCP's initial RTO; see <span><a href="https://rfc-editor.org/rfc/rfc6298#section-2" class="relref">Section 2</a> of [<a href="#RFC6298" class="cite xref">RFC6298</a>]</span>.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
2145c2172
< <a href="#constants-of-interest" class="xref">Appendix A.2</a>) for a new path, but the delay <span class="bcp14">SHOULD NOT</span> be
---
> <a href="#constants-of-interest" class="auto internal xref">Appendix A.2</a>) for a new path, but the delay <span class="bcp14">SHOULD NOT</span> be
2148c2175
< <a href="#discarding-packets" class="xref">Section 6.4</a>), any Initial packets and Handshake packets can
---
> <a href="#discarding-packets" class="auto internal xref">Section 6.4</a>), any Initial packets and Handshake packets can
2161c2188
< as specified in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. If no additional data can be
---
> as specified in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. If no additional data can be
2174c2201
< <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-8" class="relref">Section 8</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>). That is, the client <span class="bcp14">MUST</span> set the PTO timer
---
> <span><a href="https://rfc-editor.org/rfc/rfc9000#section-8" class="relref">Section 8</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>). That is, the client <span class="bcp14">MUST</span> set the PTO timer
2176c2203
< packets and the handshake is not confirmed (see <span><a href="https://www.rfc-editor.org/rfc/rfc9001#section-4.1.2" class="relref">Section 4.1.2</a> of [<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>),
---
> packets and the handshake is not confirmed (see <span><a href="https://rfc-editor.org/rfc/rfc9001#section-4.1.2" class="relref">Section 4.1.2</a> of [<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span>),
2197c2224
< validation limits in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. Doing so at most once
---
> validation limits in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. Doing so at most once
2201c2228
< <p id="section-6.2.3-3">Endpoints can also use coalesced packets (see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-12.2" class="relref">Section 12.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>) to ensure that each datagram elicits at least one
---
> <p id="section-6.2.3-3">Endpoints can also use coalesced packets (see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-12.2" class="relref">Section 12.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>) to ensure that each datagram elicits at least one
2269c2296
< <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-17.2.5" class="relref">Section 17.2.5</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
---
> <span><a href="https://rfc-editor.org/rfc/rfc9000#section-17.2.5" class="relref">Section 17.2.5</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6.3-2" class="pilcrow">¶</a></p>
2282c2309
< (see <span><a href="https://www.rfc-editor.org/rfc/rfc9001#section-4.9" class="relref">Section 4.9</a> of [<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>), all packets that were sent with those keys
---
> (see <span><a href="https://rfc-editor.org/rfc/rfc9001#section-4.9" class="relref">Section 4.9</a> of [<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span>), all packets that were sent with those keys
2287c2314
< Handshake packets; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-17.2.2.1" class="relref">Section 17.2.2.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. At this point,
---
> Handshake packets; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-17.2.2.1" class="relref">Section 17.2.2.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. At this point,
2298c2325
< <span><a href="https://www.rfc-editor.org/rfc/rfc9001#section-4.9.1" class="relref">Section 4.9.1</a> of [<a href="#QUIC-TLS" class="xref">QUIC-TLS</a>]</span>.<a href="#section-6.4-5" class="pilcrow">¶</a></p>
---
> <span><a href="https://rfc-editor.org/rfc/rfc9001#section-4.9.1" class="relref">Section 4.9.1</a> of [<a href="#QUIC-TLS" class="cite xref">QUIC-TLS</a>]</span>.<a href="#section-6.4-5" class="pilcrow">¶</a></p>
2309c2336
< TCP NewReno <span>[<a href="#RFC6582" class="xref">RFC6582</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
---
> TCP NewReno <span>[<a href="#RFC6582" class="cite xref">RFC6582</a>]</span>.<a href="#section-7-1" class="pilcrow">¶</a></p>
2312c2339
< different algorithm to use, such as CUBIC <span>[<a href="#RFC8312" class="xref">RFC8312</a>]</span>.<a href="#section-7-2" class="pilcrow">¶</a></p>
---
> different algorithm to use, such as CUBIC <span>[<a href="#RFC8312" class="cite xref">RFC8312</a>]</span>.<a href="#section-7-2" class="pilcrow">¶</a></p>
2315c2342
< specified in <span><a href="https://www.rfc-editor.org/rfc/rfc8085#section-3.1" class="relref">Section 3.1</a> of [<a href="#RFC8085" class="xref">RFC8085</a>]</span>.<a href="#section-7-3" class="pilcrow">¶</a></p>
---
> specified in <span><a href="https://rfc-editor.org/rfc/rfc8085#section-3.1" class="relref">Section 3.1</a> of [<a href="#RFC8085" class="cite xref">RFC8085</a>]</span>.<a href="#section-7-3" class="pilcrow">¶</a></p>
2323c2350
< <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7-5" class="pilcrow">¶</a></p>
---
> <span><a href="https://rfc-editor.org/rfc/rfc9000#section-9.4" class="relref">Section 9.4</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7-5" class="pilcrow">¶</a></p>
2327,2329c2354,2356
< <a href="#vars-of-interest" class="xref">Appendix B.2</a>) to be larger than the congestion window, unless the packet
< is sent on a PTO timer expiration (see <a href="#pto" class="xref">Section 6.2</a>) or when entering recovery
< (see <a href="#recovery-period" class="xref">Section 7.3.2</a>).<a href="#section-7-7" class="pilcrow">¶</a></p>
---
> <a href="#vars-of-interest" class="auto internal xref">Appendix B.2</a>) to be larger than the congestion window, unless the packet
> is sent on a PTO timer expiration (see <a href="#pto" class="auto internal xref">Section 6.2</a>) or when entering recovery
> (see <a href="#recovery-period" class="auto internal xref">Section 7.3.2</a>).<a href="#section-7-7" class="pilcrow">¶</a></p>
2336c2363
< <span>[<a href="#RFC3168" class="xref">RFC3168</a>]</span> <span>[<a href="#RFC8311" class="xref">RFC8311</a>]</span>, QUIC treats a Congestion Experienced (CE) codepoint
---
> <span>[<a href="#RFC3168" class="cite xref">RFC3168</a>]</span> <span>[<a href="#RFC8311" class="cite xref">RFC8311</a>]</span>, QUIC treats a Congestion Experienced (CE) codepoint
2338c2365
< endpoint's response when the peer-reported ECN-CE count increases; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.4.2" class="relref">Section 13.4.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
---
> endpoint's response when the peer-reported ECN-CE count increases; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.4.2" class="relref">Section 13.4.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
2350c2377
< analysis and recommendations in <span>[<a href="#RFC6928" class="xref">RFC6928</a>]</span>, increasing the byte limit to
---
> analysis and recommendations in <span>[<a href="#RFC6928" class="cite xref">RFC6928</a>]</span>, increasing the byte limit to
2358c2385
< the anti-amplification limit as specified in <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.
---
> the anti-amplification limit as specified in <span><a href="https://rfc-editor.org/rfc/rfc9000#section-8.1" class="relref">Section 8.1</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.
2373c2400
< distinct states, as shown in <a href="#fig-cc-fsm" class="xref">Figure 1</a>.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
---
> distinct states, as shown in <a href="#fig-cc-fsm" class="auto internal xref">Figure 1</a>.<a href="#section-7.3-1" class="pilcrow">¶</a></p>
2376c2403
<           <div class="artwork art-text alignLeft" id="section-7.3-2.1">
---
>           <div class="alignLeft art-text artwork" id="section-7.3-2.1">
2435c2462
< <span>[<a href="#PRR" class="xref">PRR</a>]</span>, to reduce the congestion window more gradually. If the
---
> <span>[<a href="#PRR" class="cite xref">PRR</a>]</span>, to reduce the congestion window more gradually. If the
2438c2465
< retransmitted and is similar to TCP as described in <span><a href="https://www.rfc-editor.org/rfc/rfc6675#section-5" class="relref">Section 5</a> of [<a href="#RFC6675" class="xref">RFC6675</a>]</span>.<a href="#section-7.3.2-3" class="pilcrow">¶</a></p>
---
> retransmitted and is similar to TCP as described in <span><a href="https://rfc-editor.org/rfc/rfc6675#section-5" class="relref">Section 5</a> of [<a href="#RFC6675" class="cite xref">RFC6675</a>]</span>.<a href="#section-7.3.2-3" class="pilcrow">¶</a></p>
2445c2472
< started recovery is acknowledged <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>.<a href="#section-7.3.2-5" class="pilcrow">¶</a></p>
---
> started recovery is acknowledged <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>.<a href="#section-7.3.2-5" class="pilcrow">¶</a></p>
2506,2507c2533,2534
< <div id="section-7.6.1-2">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-7.6.1-2">
> <pre>
2512c2539
< <p id="section-7.6.1-3">Unlike the PTO computation in <a href="#pto" class="xref">Section 6.2</a>, this duration includes the max_ack_delay
---
> <p id="section-7.6.1-3">Unlike the PTO computation in <a href="#pto" class="auto internal xref">Section 6.2</a>, this duration includes the max_ack_delay
2516c2543
< with Tail Loss Probes <span>[<a href="#RFC8985" class="xref">RFC8985</a>]</span> and an RTO <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>.<a href="#section-7.6.1-4" class="pilcrow">¶</a></p>
---
> with Tail Loss Probes <span>[<a href="#RFC8985" class="cite xref">RFC8985</a>]</span> and an RTO <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>.<a href="#section-7.6.1-4" class="pilcrow">¶</a></p>
2546c2573
< persistent congestion duration (<a href="#pc-duration" class="xref">Section 7.6.1</a>); and<a href="#section-7.6.2-2.2" class="pilcrow">¶</a>
---
> persistent congestion duration (<a href="#pc-duration" class="auto internal xref">Section 7.6.1</a>); and<a href="#section-7.6.2-2.2" class="pilcrow">¶</a>
2553c2580
< see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7.6.2-3" class="pilcrow">¶</a></p>
---
> see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.2" class="relref">Section 13.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-7.6.2-3" class="pilcrow">¶</a></p>
2556c2583
< the initial RTT (<a href="#pto-handshake" class="xref">Section 6.2.2</a>), which could be substantially larger than
---
> the initial RTT (<a href="#pto-handshake" class="auto internal xref">Section 6.2.2</a>), which could be substantially larger than
2568c2595
< sender's response on an RTO <span>[<a href="#RFC5681" class="xref">RFC5681</a>]</span>.<a href="#section-7.6.2-6" class="pilcrow">¶</a></p>
---
> sender's response on an RTO <span>[<a href="#RFC5681" class="cite xref">RFC5681</a>]</span>.<a href="#section-7.6.2-6" class="pilcrow">¶</a></p>
2578,2579c2605,2606
< <div id="section-7.6.3-2">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-7.6.3-2">
> <pre>
2663c2690
< initial congestion window; see <a href="#initial-cwnd" class="xref">Section 7.2</a>. A sender with knowledge that
---
> initial congestion window; see <a href="#initial-cwnd" class="auto internal xref">Section 7.2</a>. A sender with knowledge that
2678,2679c2705,2706
< <div id="section-7.7-6">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-7.7-6">
> <pre>
2684,2685c2711,2712
< <div id="section-7.7-8">
< <pre class="sourcecode lang-pseudocode">
---
> <div class="lang-pseudocode sourcecode" id="section-7.7-8">
> <pre>
2710c2737
< <p id="section-7.8-2">A sender that paces packets (see <a href="#pacing" class="xref">Section 7.7</a>) might delay sending packets
---
> <p id="section-7.8-2">A sender that paces packets (see <a href="#pacing" class="auto internal xref">Section 7.7</a>) might delay sending packets
2716c2743
< <span>[<a href="#RFC7661" class="xref">RFC7661</a>]</span>.<a href="#section-7.8-3" class="pilcrow">¶</a></p>
---
> <span>[<a href="#RFC7661" class="cite xref">RFC7661</a>]</span>.<a href="#section-7.8-3" class="pilcrow">¶</a></p>
2762c2789
< codepoints in subsequent packets sent on that path <span>[<a href="#RFC3168" class="xref">RFC3168</a>]</span>.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
---
> codepoints in subsequent packets sent on that path <span>[<a href="#RFC3168" class="cite xref">RFC3168</a>]</span>.<a href="#section-8.3-2" class="pilcrow">¶</a></p>
2768,2769c2795,2796
< Markings can be treated as equivalent to loss <span>[<a href="#RFC3168" class="xref">RFC3168</a>]</span>, but other
< responses can be specified, such as <span>[<a href="#RFC8511" class="xref">RFC8511</a>]</span> or <span>[<a href="#RFC8311" class="xref">RFC8311</a>]</span>.<a href="#section-8.3-4" class="pilcrow">¶</a></p>
---
> Markings can be treated as equivalent to loss <span>[<a href="#RFC3168" class="cite xref">RFC3168</a>]</span>, but other
> responses can be specified, such as <span>[<a href="#RFC8511" class="cite xref">RFC8511</a>]</span> or <span>[<a href="#RFC8311" class="cite xref">RFC8311</a>]</span>.<a href="#section-8.3-4" class="pilcrow">¶</a></p>
2886c2913
< <section id="section-appendix.a">
---
> <section id="appendix-A">
2888c2915
< <a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-loss-recovery-pseudocode" class="section-name selfRef">Loss Recovery Pseudocode</a>
---
> <a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-loss-recovery-pseudocode" class="section-name selfRef">Loss Recovery Pseudocode</a>
2890,2893c2917,2920
< <p id="section-appendix.a-1">We now describe an example implementation of the loss detection mechanisms
< described in <a href="#loss-detection" class="xref">Section 6</a>.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
< <p id="section-appendix.a-2">The pseudocode segments in this section are licensed as Code Components; see the
< copyright notice.<a href="#section-appendix.a-2" class="pilcrow">¶</a></p>
---
> <p id="appendix-A-1">We now describe an example implementation of the loss detection mechanisms
> described in <a href="#loss-detection" class="auto internal xref">Section 6</a>.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
> <p id="appendix-A-2">The pseudocode segments in this section are licensed as Code Components; see the
> copyright notice.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
2895,2899c2922,2926
< <section id="section-a.1">
<         <h2 id="name-tracking-sent-packets">
< <a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-tracking-sent-packets" class="section-name selfRef">Tracking Sent Packets</a>
<         </h2>
< <p id="section-a.1-1">To correctly implement congestion control, a QUIC sender tracks every
---
> <section id="appendix-A.1">
>         <h3 id="name-tracking-sent-packets">
> <a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-tracking-sent-packets" class="section-name selfRef">Tracking Sent Packets</a>
>         </h3>
> <p id="appendix-A.1-1">To correctly implement congestion control, a QUIC sender tracks every
2903,2907c2930,2934
< (<a href="#sent-packets-fields" class="xref">Appendix A.1.1</a>) for loss recovery and congestion control.<a href="#section-a.1-1" class="pilcrow">¶</a></p>
< <p id="section-a.1-2">After a packet is declared lost, the endpoint can still maintain state for it
< for an amount of time to allow for packet reordering; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. This enables a sender to detect spurious retransmissions.<a href="#section-a.1-2" class="pilcrow">¶</a></p>
< <p id="section-a.1-3">Sent packets are tracked for each packet number space, and ACK
< processing only applies to a single space.<a href="#section-a.1-3" class="pilcrow">¶</a></p>
---
> (<a href="#sent-packets-fields" class="auto internal xref">Appendix A.1.1</a>) for loss recovery and congestion control.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.1-2">After a packet is declared lost, the endpoint can still maintain state for it
> for an amount of time to allow for packet reordering; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>. This enables a sender to detect spurious retransmissions.<a href="#appendix-A.1-2" class="pilcrow">¶</a></p>
> <p id="appendix-A.1-3">Sent packets are tracked for each packet number space, and ACK
> processing only applies to a single space.<a href="#appendix-A.1-3" class="pilcrow">¶</a></p>
2909,2916c2936,2943
< <section id="section-a.1.1">
<           <h3 id="name-sent-packet-fields">
< <a href="#section-a.1.1" class="section-number selfRef">A.1.1. </a><a href="#name-sent-packet-fields" class="section-name selfRef">Sent Packet Fields</a>
<           </h3>
< <span class="break"></span><dl class="dlParallel" id="section-a.1.1-1">
<             <dt id="section-a.1.1-1.1">packet_number:</dt>
<             <dd style="margin-left: 1.5em" id="section-a.1.1-1.2">
<               <p id="section-a.1.1-1.2.1">The packet number of the sent packet.<a href="#section-a.1.1-1.2.1" class="pilcrow">¶</a></p>
---
> <section id="appendix-A.1.1">
>           <h4 id="name-sent-packet-fields">
> <a href="#appendix-A.1.1" class="section-number selfRef">A.1.1. </a><a href="#name-sent-packet-fields" class="section-name selfRef">Sent Packet Fields</a>
>           </h4>
> <span class="break"></span><dl class="dlParallel" id="appendix-A.1.1-1">
>             <dt id="appendix-A.1.1-1.1">packet_number:</dt>
>             <dd style="margin-left: 1.5em" id="appendix-A.1.1-1.2">
>               <p id="appendix-A.1.1-1.2.1">The packet number of the sent packet.<a href="#appendix-A.1.1-1.2.1" class="pilcrow">¶</a></p>
2919,2921c2946,2948
< <dt id="section-a.1.1-1.3">ack_eliciting:</dt>
<             <dd style="margin-left: 1.5em" id="section-a.1.1-1.4">
<               <p id="section-a.1.1-1.4.1">A Boolean that indicates whether a packet is ack-eliciting.
---
> <dt id="appendix-A.1.1-1.3">ack_eliciting:</dt>
>             <dd style="margin-left: 1.5em" id="appendix-A.1.1-1.4">
>               <p id="appendix-A.1.1-1.4.1">A Boolean that indicates whether a packet is ack-eliciting.
2924c2951
< by up to the max_ack_delay.<a href="#section-a.1.1-1.4.1" class="pilcrow">¶</a></p>
---
> by up to the max_ack_delay.<a href="#appendix-A.1.1-1.4.1" class="pilcrow">¶</a></p>
2927,2930c2954,2957
< <dt id="section-a.1.1-1.5">in_flight:</dt>
<             <dd style="margin-left: 1.5em" id="section-a.1.1-1.6">
<               <p id="section-a.1.1-1.6.1">A Boolean that indicates whether the packet counts toward bytes in
< flight.<a href="#section-a.1.1-1.6.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.1.1-1.5">in_flight:</dt>
>             <dd style="margin-left: 1.5em" id="appendix-A.1.1-1.6">
>               <p id="appendix-A.1.1-1.6.1">A Boolean that indicates whether the packet counts toward bytes in
> flight.<a href="#appendix-A.1.1-1.6.1" class="pilcrow">¶</a></p>
2933,2936c2960,2963
< <dt id="section-a.1.1-1.7">sent_bytes:</dt>
<             <dd style="margin-left: 1.5em" id="section-a.1.1-1.8">
<               <p id="section-a.1.1-1.8.1">The number of bytes sent in the packet, not including UDP or IP
< overhead, but including QUIC framing overhead.<a href="#section-a.1.1-1.8.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.1.1-1.7">sent_bytes:</dt>
>             <dd style="margin-left: 1.5em" id="appendix-A.1.1-1.8">
>               <p id="appendix-A.1.1-1.8.1">The number of bytes sent in the packet, not including UDP or IP
> overhead, but including QUIC framing overhead.<a href="#appendix-A.1.1-1.8.1" class="pilcrow">¶</a></p>
2939,2941c2966,2968
< <dt id="section-a.1.1-1.9">time_sent:</dt>
<             <dd style="margin-left: 1.5em" id="section-a.1.1-1.10">
<               <p id="section-a.1.1-1.10.1">The time the packet was sent.<a href="#section-a.1.1-1.10.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.1.1-1.9">time_sent:</dt>
>             <dd style="margin-left: 1.5em" id="appendix-A.1.1-1.10">
>               <p id="appendix-A.1.1-1.10.1">The time the packet was sent.<a href="#appendix-A.1.1-1.10.1" class="pilcrow">¶</a></p>
2950,2965c2977,2992
< <section id="section-a.2">
<         <h2 id="name-constants-of-interest">
< <a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-constants-of-interest" class="section-name selfRef">Constants of Interest</a>
<         </h2>
< <p id="section-a.2-1">Constants used in loss recovery are based on a combination of RFCs, papers, and
< common practice.<a href="#section-a.2-1" class="pilcrow">¶</a></p>
< <span class="break"></span><dl class="dlParallel" id="section-a.2-2">
<           <dt id="section-a.2-2.1">kPacketThreshold:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.2-2.2">
<             <p id="section-a.2-2.2.1">Maximum reordering in packets before packet threshold loss detection
< considers a packet lost. The value recommended in <a href="#packet-threshold" class="xref">Section 6.1.1</a> is 3.<a href="#section-a.2-2.2.1" class="pilcrow">¶</a></p>
< </dd>
<           <dd class="break"></dd>
< <dt id="section-a.2-2.3">kTimeThreshold:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.2-2.4">
<             <p id="section-a.2-2.4.1">Maximum reordering in time before time threshold loss detection
---
> <section id="appendix-A.2">
>         <h3 id="name-constants-of-interest">
> <a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-constants-of-interest" class="section-name selfRef">Constants of Interest</a>
>         </h3>
> <p id="appendix-A.2-1">Constants used in loss recovery are based on a combination of RFCs, papers, and
> common practice.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
> <span class="break"></span><dl class="dlParallel" id="appendix-A.2-2">
>           <dt id="appendix-A.2-2.1">kPacketThreshold:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.2-2.2">
>             <p id="appendix-A.2-2.2.1">Maximum reordering in packets before packet threshold loss detection
> considers a packet lost. The value recommended in <a href="#packet-threshold" class="auto internal xref">Section 6.1.1</a> is 3.<a href="#appendix-A.2-2.2.1" class="pilcrow">¶</a></p>
> </dd>
>           <dd class="break"></dd>
> <dt id="appendix-A.2-2.3">kTimeThreshold:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.2-2.4">
>             <p id="appendix-A.2-2.4.1">Maximum reordering in time before time threshold loss detection
2967c2994
< recommended in <a href="#time-threshold" class="xref">Section 6.1.2</a> is 9/8.<a href="#section-a.2-2.4.1" class="pilcrow">¶</a></p>
---
> recommended in <a href="#time-threshold" class="auto internal xref">Section 6.1.2</a> is 9/8.<a href="#appendix-A.2-2.4.1" class="pilcrow">¶</a></p>
2970,2973c2997,3000
< <dt id="section-a.2-2.5">kGranularity:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.2-2.6">
<             <p id="section-a.2-2.6.1">Timer granularity. This is a system-dependent value, and <a href="#time-threshold" class="xref">Section 6.1.2</a>
< recommends a value of 1 ms.<a href="#section-a.2-2.6.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.2-2.5">kGranularity:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.2-2.6">
>             <p id="appendix-A.2-2.6.1">Timer granularity. This is a system-dependent value, and <a href="#time-threshold" class="auto internal xref">Section 6.1.2</a>
> recommends a value of 1 ms.<a href="#appendix-A.2-2.6.1" class="pilcrow">¶</a></p>
2976,2979c3003,3006
< <dt id="section-a.2-2.7">kInitialRtt:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.2-2.8">
<             <p id="section-a.2-2.8.1">The RTT used before an RTT sample is taken. The value recommended in
< <a href="#pto-handshake" class="xref">Section 6.2.2</a> is 333 ms.<a href="#section-a.2-2.8.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.2-2.7">kInitialRtt:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.2-2.8">
>             <p id="appendix-A.2-2.8.1">The RTT used before an RTT sample is taken. The value recommended in
> <a href="#pto-handshake" class="auto internal xref">Section 6.2.2</a> is 333 ms.<a href="#appendix-A.2-2.8.1" class="pilcrow">¶</a></p>
2982,2984c3009,3011
< <dt id="section-a.2-2.9">kPacketNumberSpace:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.2-2.10">
<             <p id="section-a.2-2.10.1">An enum to enumerate the three packet number spaces:<a href="#section-a.2-2.10.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.2-2.9">kPacketNumberSpace:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.2-2.10">
>             <p id="appendix-A.2-2.10.1">An enum to enumerate the three packet number spaces:<a href="#appendix-A.2-2.10.1" class="pilcrow">¶</a></p>
2988c3015
< <div class="artwork art-text alignLeft" id="section-a.2-3">
---
> <div class="alignLeft art-text artwork" id="appendix-A.2-3">
2995c3022
< </pre><a href="#section-a.2-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.2-3" class="pilcrow">¶</a>
3000,3010c3027,3037
< <section id="section-a.3">
<         <h2 id="name-variables-of-interest">
< <a href="#section-a.3" class="section-number selfRef">A.3. </a><a href="#name-variables-of-interest" class="section-name selfRef">Variables of Interest</a>
<         </h2>
< <p id="section-a.3-1">Variables required to implement the congestion control mechanisms
< are described in this section.<a href="#section-a.3-1" class="pilcrow">¶</a></p>
< <span class="break"></span><dl class="dlParallel" id="section-a.3-2">
<           <dt id="section-a.3-2.1">latest_rtt:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.2">
<             <p id="section-a.3-2.2.1">The most recent RTT measurement made when receiving an acknowledgment for
< a previously unacknowledged packet.<a href="#section-a.3-2.2.1" class="pilcrow">¶</a></p>
---
> <section id="appendix-A.3">
>         <h3 id="name-variables-of-interest">
> <a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-variables-of-interest" class="section-name selfRef">Variables of Interest</a>
>         </h3>
> <p id="appendix-A.3-1">Variables required to implement the congestion control mechanisms
> are described in this section.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
> <span class="break"></span><dl class="dlParallel" id="appendix-A.3-2">
>           <dt id="appendix-A.3-2.1">latest_rtt:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.2">
>             <p id="appendix-A.3-2.2.1">The most recent RTT measurement made when receiving an acknowledgment for
> a previously unacknowledged packet.<a href="#appendix-A.3-2.2.1" class="pilcrow">¶</a></p>
3013,3016c3040,3043
< <dt id="section-a.3-2.3">smoothed_rtt:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.4">
<             <p id="section-a.3-2.4.1">The smoothed RTT of the connection, computed as described in
< <a href="#smoothed-rtt" class="xref">Section 5.3</a>.<a href="#section-a.3-2.4.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.3">smoothed_rtt:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.4">
>             <p id="appendix-A.3-2.4.1">The smoothed RTT of the connection, computed as described in
> <a href="#smoothed-rtt" class="auto internal xref">Section 5.3</a>.<a href="#appendix-A.3-2.4.1" class="pilcrow">¶</a></p>
3019,3021c3046,3048
< <dt id="section-a.3-2.5">rttvar:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.6">
<             <p id="section-a.3-2.6.1">The RTT variation, computed as described in <a href="#smoothed-rtt" class="xref">Section 5.3</a>.<a href="#section-a.3-2.6.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.5">rttvar:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.6">
>             <p id="appendix-A.3-2.6.1">The RTT variation, computed as described in <a href="#smoothed-rtt" class="auto internal xref">Section 5.3</a>.<a href="#appendix-A.3-2.6.1" class="pilcrow">¶</a></p>
3024,3027c3051,3054
< <dt id="section-a.3-2.7">min_rtt:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.8">
<             <p id="section-a.3-2.8.1">The minimum RTT seen over a period of time, ignoring acknowledgment delay, as
< described in <a href="#min-rtt" class="xref">Section 5.2</a>.<a href="#section-a.3-2.8.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.7">min_rtt:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.8">
>             <p id="appendix-A.3-2.8.1">The minimum RTT seen over a period of time, ignoring acknowledgment delay, as
> described in <a href="#min-rtt" class="auto internal xref">Section 5.2</a>.<a href="#appendix-A.3-2.8.1" class="pilcrow">¶</a></p>
3030,3032c3057,3059
< <dt id="section-a.3-2.9">first_rtt_sample:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.10">
<             <p id="section-a.3-2.10.1">The time that the first RTT sample was obtained.<a href="#section-a.3-2.10.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.9">first_rtt_sample:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.10">
>             <p id="appendix-A.3-2.10.1">The time that the first RTT sample was obtained.<a href="#appendix-A.3-2.10.1" class="pilcrow">¶</a></p>
3035,3037c3062,3064
< <dt id="section-a.3-2.11">max_ack_delay:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.12">
<             <p id="section-a.3-2.12.1">The maximum amount of time by which the receiver intends to delay
---
> <dt id="appendix-A.3-2.11">max_ack_delay:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.12">
>             <p id="appendix-A.3-2.12.1">The maximum amount of time by which the receiver intends to delay
3039,3040c3066,3067
< space, as defined by the eponymous transport parameter (<span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-18.2" class="relref">Section 18.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>). Note that the actual ack_delay in a received
< ACK frame may be larger due to late timers, reordering, or loss.<a href="#section-a.3-2.12.1" class="pilcrow">¶</a></p>
---
> space, as defined by the eponymous transport parameter (<span><a href="https://rfc-editor.org/rfc/rfc9000#section-18.2" class="relref">Section 18.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>). Note that the actual ack_delay in a received
> ACK frame may be larger due to late timers, reordering, or loss.<a href="#appendix-A.3-2.12.1" class="pilcrow">¶</a></p>
3043,3045c3070,3072
< <dt id="section-a.3-2.13">loss_detection_timer:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.14">
<             <p id="section-a.3-2.14.1">Multi-modal timer used for loss detection.<a href="#section-a.3-2.14.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.13">loss_detection_timer:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.14">
>             <p id="appendix-A.3-2.14.1">Multi-modal timer used for loss detection.<a href="#appendix-A.3-2.14.1" class="pilcrow">¶</a></p>
3048,3050c3075,3077
< <dt id="section-a.3-2.15">pto_count:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.16">
<             <p id="section-a.3-2.16.1">The number of times a PTO has been sent without receiving an acknowledgment.<a href="#section-a.3-2.16.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.15">pto_count:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.16">
>             <p id="appendix-A.3-2.16.1">The number of times a PTO has been sent without receiving an acknowledgment.<a href="#appendix-A.3-2.16.1" class="pilcrow">¶</a></p>
3053,3055c3080,3082
< <dt id="section-a.3-2.17">time_of_last_ack_eliciting_packet[kPacketNumberSpace]:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.18">
<             <p id="section-a.3-2.18.1">The time the most recent ack-eliciting packet was sent.<a href="#section-a.3-2.18.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.17">time_of_last_ack_eliciting_packet[kPacketNumberSpace]:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.18">
>             <p id="appendix-A.3-2.18.1">The time the most recent ack-eliciting packet was sent.<a href="#appendix-A.3-2.18.1" class="pilcrow">¶</a></p>
3058,3060c3085,3087
< <dt id="section-a.3-2.19">largest_acked_packet[kPacketNumberSpace]:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.20">
<             <p id="section-a.3-2.20.1">The largest packet number acknowledged in the packet number space so far.<a href="#section-a.3-2.20.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.19">largest_acked_packet[kPacketNumberSpace]:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.20">
>             <p id="appendix-A.3-2.20.1">The largest packet number acknowledged in the packet number space so far.<a href="#appendix-A.3-2.20.1" class="pilcrow">¶</a></p>
3063,3066c3090,3093
< <dt id="section-a.3-2.21">loss_time[kPacketNumberSpace]:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.22">
<             <p id="section-a.3-2.22.1">The time at which the next packet in that packet number space can be
< considered lost based on exceeding the reordering window in time.<a href="#section-a.3-2.22.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.21">loss_time[kPacketNumberSpace]:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.22">
>             <p id="appendix-A.3-2.22.1">The time at which the next packet in that packet number space can be
> considered lost based on exceeding the reordering window in time.<a href="#appendix-A.3-2.22.1" class="pilcrow">¶</a></p>
3069,3072c3096,3099
< <dt id="section-a.3-2.23">sent_packets[kPacketNumberSpace]:</dt>
<           <dd style="margin-left: 1.5em" id="section-a.3-2.24">
<             <p id="section-a.3-2.24.1">An association of packet numbers in a packet number space to information
< about them.  Described in detail above in <a href="#tracking-sent-packets" class="xref">Appendix A.1</a>.<a href="#section-a.3-2.24.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-A.3-2.23">sent_packets[kPacketNumberSpace]:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-A.3-2.24">
>             <p id="appendix-A.3-2.24.1">An association of packet numbers in a packet number space to information
> about them.  Described in detail above in <a href="#tracking-sent-packets" class="auto internal xref">Appendix A.1</a>.<a href="#appendix-A.3-2.24.1" class="pilcrow">¶</a></p>
3079,3086c3106,3113
< <section id="section-a.4">
<         <h2 id="name-initialization">
< <a href="#section-a.4" class="section-number selfRef">A.4. </a><a href="#name-initialization" class="section-name selfRef">Initialization</a>
<         </h2>
< <p id="section-a.4-1">At the beginning of the connection, initialize the loss detection variables as
< follows:<a href="#section-a.4-1" class="pilcrow">¶</a></p>
< <div id="section-a.4-2">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-A.4">
>         <h3 id="name-initialization">
> <a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-initialization" class="section-name selfRef">Initialization</a>
>         </h3>
> <p id="appendix-A.4-1">At the beginning of the connection, initialize the loss detection variables as
> follows:<a href="#appendix-A.4-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.4-2">
> <pre>
3098c3125
< </pre><a href="#section-a.4-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.4-2" class="pilcrow">¶</a>
3103,3111c3130,3138
< <section id="section-a.5">
<         <h2 id="name-on-sending-a-packet">
< <a href="#section-a.5" class="section-number selfRef">A.5. </a><a href="#name-on-sending-a-packet" class="section-name selfRef">On Sending a Packet</a>
<         </h2>
< <p id="section-a.5-1">After a packet is sent, information about the packet is stored.  The parameters
< to OnPacketSent are described in detail above in <a href="#sent-packets-fields" class="xref">Appendix A.1.1</a>.<a href="#section-a.5-1" class="pilcrow">¶</a></p>
< <p id="section-a.5-2">Pseudocode for OnPacketSent follows:<a href="#section-a.5-2" class="pilcrow">¶</a></p>
< <div id="section-a.5-3">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-A.5">
>         <h3 id="name-on-sending-a-packet">
> <a href="#appendix-A.5" class="section-number selfRef">A.5. </a><a href="#name-on-sending-a-packet" class="section-name selfRef">On Sending a Packet</a>
>         </h3>
> <p id="appendix-A.5-1">After a packet is sent, information about the packet is stored.  The parameters
> to OnPacketSent are described in detail above in <a href="#sent-packets-fields" class="auto internal xref">Appendix A.1.1</a>.<a href="#appendix-A.5-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.5-2">Pseudocode for OnPacketSent follows:<a href="#appendix-A.5-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.5-3">
> <pre>
3126c3153
< </pre><a href="#section-a.5-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.5-3" class="pilcrow">¶</a>
3131,3135c3158,3162
< <section id="section-a.6">
<         <h2 id="name-on-receiving-a-datagram">
< <a href="#section-a.6" class="section-number selfRef">A.6. </a><a href="#name-on-receiving-a-datagram" class="section-name selfRef">On Receiving a Datagram</a>
<         </h2>
< <p id="section-a.6-1">When a server is blocked by anti-amplification limits, receiving
---
> <section id="appendix-A.6">
>         <h3 id="name-on-receiving-a-datagram">
> <a href="#appendix-A.6" class="section-number selfRef">A.6. </a><a href="#name-on-receiving-a-datagram" class="section-name selfRef">On Receiving a Datagram</a>
>         </h3>
> <p id="appendix-A.6-1">When a server is blocked by anti-amplification limits, receiving
3138,3141c3165,3168
< timer will need to be rearmed.<a href="#section-a.6-1" class="pilcrow">¶</a></p>
< <p id="section-a.6-2">Pseudocode for OnDatagramReceived follows:<a href="#section-a.6-2" class="pilcrow">¶</a></p>
< <div id="section-a.6-3">
< <pre class="sourcecode lang-pseudocode">
---
> timer will need to be rearmed.<a href="#appendix-A.6-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.6-2">Pseudocode for OnDatagramReceived follows:<a href="#appendix-A.6-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.6-3">
> <pre>
3151c3178
< </pre><a href="#section-a.6-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.6-3" class="pilcrow">¶</a>
3156,3163c3183,3190
< <section id="section-a.7">
<         <h2 id="name-on-receiving-an-acknowledgm">
< <a href="#section-a.7" class="section-number selfRef">A.7. </a><a href="#name-on-receiving-an-acknowledgm" class="section-name selfRef">On Receiving an Acknowledgment</a>
<         </h2>
< <p id="section-a.7-1">When an ACK frame is received, it may newly acknowledge any number of packets.<a href="#section-a.7-1" class="pilcrow">¶</a></p>
< <p id="section-a.7-2">Pseudocode for OnAckReceived and UpdateRtt follow:<a href="#section-a.7-2" class="pilcrow">¶</a></p>
< <div id="section-a.7-3">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-A.7">
>         <h3 id="name-on-receiving-an-acknowledgm">
> <a href="#appendix-A.7" class="section-number selfRef">A.7. </a><a href="#name-on-receiving-an-acknowledgm" class="section-name selfRef">On Receiving an Acknowledgment</a>
>         </h3>
> <p id="appendix-A.7-1">When an ACK frame is received, it may newly acknowledge any number of packets.<a href="#appendix-A.7-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.7-2">Pseudocode for OnAckReceived and UpdateRtt follow:<a href="#appendix-A.7-2" class="pilcrow">¶</a></p>
> <div class="breakable lang-pseudocode sourcecode" id="appendix-A.7-3">
> <pre>
3232c3259
< </pre><a href="#section-a.7-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.7-3" class="pilcrow">¶</a>
3237,3241c3264,3268
< <section id="section-a.8">
<         <h2 id="name-setting-the-loss-detection-">
< <a href="#section-a.8" class="section-number selfRef">A.8. </a><a href="#name-setting-the-loss-detection-" class="section-name selfRef">Setting the Loss Detection Timer</a>
<         </h2>
< <p id="section-a.8-1">QUIC loss detection uses a single timer for all timeout loss detection.  The
---
> <section id="appendix-A.8">
>         <h3 id="name-setting-the-loss-detection-">
> <a href="#appendix-A.8" class="section-number selfRef">A.8. </a><a href="#name-setting-the-loss-detection-" class="section-name selfRef">Setting the Loss Detection Timer</a>
>         </h3>
> <p id="appendix-A.8-1">QUIC loss detection uses a single timer for all timeout loss detection.  The
3244,3250c3271,3277
< below shows how the single timer is set.<a href="#section-a.8-1" class="pilcrow">¶</a></p>
< <p id="section-a.8-2">This algorithm may result in the timer being set in the past, particularly if
< timers wake up late. Timers set in the past fire immediately.<a href="#section-a.8-2" class="pilcrow">¶</a></p>
< <p id="section-a.8-3">Pseudocode for SetLossDetectionTimer follows (where the "^" operator represents
< exponentiation):<a href="#section-a.8-3" class="pilcrow">¶</a></p>
< <div id="section-a.8-4">
< <pre class="sourcecode lang-pseudocode">
---
> below shows how the single timer is set.<a href="#appendix-A.8-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.8-2">This algorithm may result in the timer being set in the past, particularly if
> timers wake up late. Timers set in the past fire immediately.<a href="#appendix-A.8-2" class="pilcrow">¶</a></p>
> <p id="appendix-A.8-3">Pseudocode for SetLossDetectionTimer follows (where the "^" operator represents
> exponentiation):<a href="#appendix-A.8-3" class="pilcrow">¶</a></p>
> <div class="breakable lang-pseudocode sourcecode" id="appendix-A.8-4">
> <pre>
3319c3346
< </pre><a href="#section-a.8-4" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.8-4" class="pilcrow">¶</a>
3324,3332c3351,3359
< <section id="section-a.9">
<         <h2 id="name-on-timeout">
< <a href="#section-a.9" class="section-number selfRef">A.9. </a><a href="#name-on-timeout" class="section-name selfRef">On Timeout</a>
<         </h2>
< <p id="section-a.9-1">When the loss detection timer expires, the timer's mode determines the action
< to be performed.<a href="#section-a.9-1" class="pilcrow">¶</a></p>
< <p id="section-a.9-2">Pseudocode for OnLossDetectionTimeout follows:<a href="#section-a.9-2" class="pilcrow">¶</a></p>
< <div id="section-a.9-3">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-A.9">
>         <h3 id="name-on-timeout">
> <a href="#appendix-A.9" class="section-number selfRef">A.9. </a><a href="#name-on-timeout" class="section-name selfRef">On Timeout</a>
>         </h3>
> <p id="appendix-A.9-1">When the loss detection timer expires, the timer's mode determines the action
> to be performed.<a href="#appendix-A.9-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.9-2">Pseudocode for OnLossDetectionTimeout follows:<a href="#appendix-A.9-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.9-3">
> <pre>
3360c3387
< </pre><a href="#section-a.9-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.9-3" class="pilcrow">¶</a>
3365,3369c3392,3396
< <section id="section-a.10">
<         <h2 id="name-detecting-lost-packets">
< <a href="#section-a.10" class="section-number selfRef">A.10. </a><a href="#name-detecting-lost-packets" class="section-name selfRef">Detecting Lost Packets</a>
<         </h2>
< <p id="section-a.10-1">DetectAndRemoveLostPackets is called every time an ACK is received or the time
---
> <section id="appendix-A.10">
>         <h3 id="name-detecting-lost-packets">
> <a href="#appendix-A.10" class="section-number selfRef">A.10. </a><a href="#name-detecting-lost-packets" class="section-name selfRef">Detecting Lost Packets</a>
>         </h3>
> <p id="appendix-A.10-1">DetectAndRemoveLostPackets is called every time an ACK is received or the time
3372,3375c3399,3402
< detected as lost.<a href="#section-a.10-1" class="pilcrow">¶</a></p>
< <p id="section-a.10-2">Pseudocode for DetectAndRemoveLostPackets follows:<a href="#section-a.10-2" class="pilcrow">¶</a></p>
< <div id="section-a.10-3">
< <pre class="sourcecode lang-pseudocode">
---
> detected as lost.<a href="#appendix-A.10-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.10-2">Pseudocode for DetectAndRemoveLostPackets follows:<a href="#appendix-A.10-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.10-3">
> <pre>
3407c3434
< </pre><a href="#section-a.10-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.10-3" class="pilcrow">¶</a>
3412,3420c3439,3447
< <section id="section-a.11">
<         <h2 id="name-upon-dropping-initial-or-ha">
< <a href="#section-a.11" class="section-number selfRef">A.11. </a><a href="#name-upon-dropping-initial-or-ha" class="section-name selfRef">Upon Dropping Initial or Handshake Keys</a>
<         </h2>
< <p id="section-a.11-1">When Initial or Handshake keys are discarded, packets from the space
< are discarded and loss detection state is updated.<a href="#section-a.11-1" class="pilcrow">¶</a></p>
< <p id="section-a.11-2">Pseudocode for OnPacketNumberSpaceDiscarded follows:<a href="#section-a.11-2" class="pilcrow">¶</a></p>
< <div id="section-a.11-3">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-A.11">
>         <h3 id="name-upon-dropping-initial-or-ha">
> <a href="#appendix-A.11" class="section-number selfRef">A.11. </a><a href="#name-upon-dropping-initial-or-ha" class="section-name selfRef">Upon Dropping Initial or Handshake Keys</a>
>         </h3>
> <p id="appendix-A.11-1">When Initial or Handshake keys are discarded, packets from the space
> are discarded and loss detection state is updated.<a href="#appendix-A.11-1" class="pilcrow">¶</a></p>
> <p id="appendix-A.11-2">Pseudocode for OnPacketNumberSpaceDiscarded follows:<a href="#appendix-A.11-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-A.11-3">
> <pre>
3430c3457
< </pre><a href="#section-a.11-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-A.11-3" class="pilcrow">¶</a>
3437c3464
< <section id="section-appendix.b">
---
> <section id="appendix-B">
3439c3466
< <a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-congestion-control-pseudoco" class="section-name selfRef">Congestion Control Pseudocode</a>
---
> <a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-congestion-control-pseudoco" class="section-name selfRef">Congestion Control Pseudocode</a>
3441,3444c3468,3471
< <p id="section-appendix.b-1">We now describe an example implementation of the congestion controller described
< in <a href="#congestion-control" class="xref">Section 7</a>.<a href="#section-appendix.b-1" class="pilcrow">¶</a></p>
< <p id="section-appendix.b-2">The pseudocode segments in this section are licensed as Code Components; see the
< copyright notice.<a href="#section-appendix.b-2" class="pilcrow">¶</a></p>
---
> <p id="appendix-B-1">We now describe an example implementation of the congestion controller described
> in <a href="#congestion-control" class="auto internal xref">Section 7</a>.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
> <p id="appendix-B-2">The pseudocode segments in this section are licensed as Code Components; see the
> copyright notice.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
3446,3455c3473,3482
< <section id="section-b.1">
<         <h2 id="name-constants-of-interest-2">
< <a href="#section-b.1" class="section-number selfRef">B.1. </a><a href="#name-constants-of-interest-2" class="section-name selfRef">Constants of Interest</a>
<         </h2>
< <p id="section-b.1-1">Constants used in congestion control are based on a combination of RFCs, papers,
< and common practice.<a href="#section-b.1-1" class="pilcrow">¶</a></p>
< <span class="break"></span><dl class="dlParallel" id="section-b.1-2">
<           <dt id="section-b.1-2.1">kInitialWindow:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.1-2.2">
<             <p id="section-b.1-2.2.1">Default limit on the initial bytes in flight as described in <a href="#initial-cwnd" class="xref">Section 7.2</a>.<a href="#section-b.1-2.2.1" class="pilcrow">¶</a></p>
---
> <section id="appendix-B.1">
>         <h3 id="name-constants-of-interest-2">
> <a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-constants-of-interest-2" class="section-name selfRef">Constants of Interest</a>
>         </h3>
> <p id="appendix-B.1-1">Constants used in congestion control are based on a combination of RFCs, papers,
> and common practice.<a href="#appendix-B.1-1" class="pilcrow">¶</a></p>
> <span class="break"></span><dl class="dlParallel" id="appendix-B.1-2">
>           <dt id="appendix-B.1-2.1">kInitialWindow:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.1-2.2">
>             <p id="appendix-B.1-2.2.1">Default limit on the initial bytes in flight as described in <a href="#initial-cwnd" class="auto internal xref">Section 7.2</a>.<a href="#appendix-B.1-2.2.1" class="pilcrow">¶</a></p>
3458,3460c3485,3487
< <dt id="section-b.1-2.3">kMinimumWindow:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.1-2.4">
<             <p id="section-b.1-2.4.1">Minimum congestion window in bytes as described in <a href="#initial-cwnd" class="xref">Section 7.2</a>.<a href="#section-b.1-2.4.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-B.1-2.3">kMinimumWindow:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.1-2.4">
>             <p id="appendix-B.1-2.4.1">Minimum congestion window in bytes as described in <a href="#initial-cwnd" class="auto internal xref">Section 7.2</a>.<a href="#appendix-B.1-2.4.1" class="pilcrow">¶</a></p>
3463,3466c3490,3493
< <dt id="section-b.1-2.5">kLossReductionFactor:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.1-2.6">
<             <p id="section-b.1-2.6.1">Scaling factor applied to reduce the congestion window when a new loss event
< is detected. <a href="#congestion-control" class="xref">Section 7</a> recommends a value of 0.5.<a href="#section-b.1-2.6.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-B.1-2.5">kLossReductionFactor:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.1-2.6">
>             <p id="appendix-B.1-2.6.1">Scaling factor applied to reduce the congestion window when a new loss event
> is detected. <a href="#congestion-control" class="auto internal xref">Section 7</a> recommends a value of 0.5.<a href="#appendix-B.1-2.6.1" class="pilcrow">¶</a></p>
3469,3472c3496,3499
< <dt id="section-b.1-2.7">kPersistentCongestionThreshold:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.1-2.8">
<             <p id="section-b.1-2.8.1">Period of time for persistent congestion to be established, specified as a PTO
< multiplier. <a href="#persistent-congestion" class="xref">Section 7.6</a> recommends a value of 3.<a href="#section-b.1-2.8.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-B.1-2.7">kPersistentCongestionThreshold:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.1-2.8">
>             <p id="appendix-B.1-2.8.1">Period of time for persistent congestion to be established, specified as a PTO
> multiplier. <a href="#persistent-congestion" class="auto internal xref">Section 7.6</a> recommends a value of 3.<a href="#appendix-B.1-2.8.1" class="pilcrow">¶</a></p>
3479,3488c3506,3515
< <section id="section-b.2">
<         <h2 id="name-variables-of-interest-2">
< <a href="#section-b.2" class="section-number selfRef">B.2. </a><a href="#name-variables-of-interest-2" class="section-name selfRef">Variables of Interest</a>
<         </h2>
< <p id="section-b.2-1">Variables required to implement the congestion control mechanisms
< are described in this section.<a href="#section-b.2-1" class="pilcrow">¶</a></p>
< <span class="break"></span><dl class="dlParallel" id="section-b.2-2">
<           <dt id="section-b.2-2.1">max_datagram_size:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.2">
<             <p id="section-b.2-2.2.1">The sender's current maximum payload size. This does not include UDP or IP
---
> <section id="appendix-B.2">
>         <h3 id="name-variables-of-interest-2">
> <a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-variables-of-interest-2" class="section-name selfRef">Variables of Interest</a>
>         </h3>
> <p id="appendix-B.2-1">Variables required to implement the congestion control mechanisms
> are described in this section.<a href="#appendix-B.2-1" class="pilcrow">¶</a></p>
> <span class="break"></span><dl class="dlParallel" id="appendix-B.2-2">
>           <dt id="appendix-B.2-2.1">max_datagram_size:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.2">
>             <p id="appendix-B.2-2.2.1">The sender's current maximum payload size. This does not include UDP or IP
3491,3492c3518,3519
< Maximum Transmission Unit (PMTU; see <span><a href="https://www.rfc-editor.org/rfc/rfc9000#section-14.2" class="relref">Section 14.2</a> of [<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>), with
< a minimum value of 1200 bytes.<a href="#section-b.2-2.2.1" class="pilcrow">¶</a></p>
---
> Maximum Transmission Unit (PMTU; see <span><a href="https://rfc-editor.org/rfc/rfc9000#section-14.2" class="relref">Section 14.2</a> of [<a href="#QUIC-TRANSPORT" class="cite xref">QUIC-TRANSPORT</a>]</span>), with
> a minimum value of 1200 bytes.<a href="#appendix-B.2-2.2.1" class="pilcrow">¶</a></p>
3495,3497c3522,3524
< <dt id="section-b.2-2.3">ecn_ce_counters[kPacketNumberSpace]:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.4">
<             <p id="section-b.2-2.4.1">The highest value reported for the ECN-CE counter in the packet number space
---
> <dt id="appendix-B.2-2.3">ecn_ce_counters[kPacketNumberSpace]:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.4">
>             <p id="appendix-B.2-2.4.1">The highest value reported for the ECN-CE counter in the packet number space
3499c3526
< reported ECN-CE counter.<a href="#section-b.2-2.4.1" class="pilcrow">¶</a></p>
---
> reported ECN-CE counter.<a href="#appendix-B.2-2.4.1" class="pilcrow">¶</a></p>
3502,3504c3529,3531
< <dt id="section-b.2-2.5">bytes_in_flight:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.6">
<             <p id="section-b.2-2.6.1">The sum of the size in bytes of all sent packets that contain at least one
---
> <dt id="appendix-B.2-2.5">bytes_in_flight:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.6">
>             <p id="appendix-B.2-2.6.1">The sum of the size in bytes of all sent packets that contain at least one
3509c3536
< ensure congestion control does not impede congestion feedback.<a href="#section-b.2-2.6.1" class="pilcrow">¶</a></p>
---
> ensure congestion control does not impede congestion feedback.<a href="#appendix-B.2-2.6.1" class="pilcrow">¶</a></p>
3512,3514c3539,3541
< <dt id="section-b.2-2.7">congestion_window:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.8">
<             <p id="section-b.2-2.8.1">Maximum number of bytes allowed to be in flight.<a href="#section-b.2-2.8.1" class="pilcrow">¶</a></p>
---
> <dt id="appendix-B.2-2.7">congestion_window:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.8">
>             <p id="appendix-B.2-2.8.1">Maximum number of bytes allowed to be in flight.<a href="#appendix-B.2-2.8.1" class="pilcrow">¶</a></p>
3517,3519c3544,3546
< <dt id="section-b.2-2.9">congestion_recovery_start_time:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.10">
<             <p id="section-b.2-2.10.1">The time the current recovery period started due to the detection of loss
---
> <dt id="appendix-B.2-2.9">congestion_recovery_start_time:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.10">
>             <p id="appendix-B.2-2.10.1">The time the current recovery period started due to the detection of loss
3521c3548
< congestion recovery.<a href="#section-b.2-2.10.1" class="pilcrow">¶</a></p>
---
> congestion recovery.<a href="#appendix-B.2-2.10.1" class="pilcrow">¶</a></p>
3524,3526c3551,3553
< <dt id="section-b.2-2.11">ssthresh:</dt>
<           <dd style="margin-left: 1.5em" id="section-b.2-2.12">
<             <p id="section-b.2-2.12.1">Slow start threshold in bytes.  When the congestion window is below ssthresh,
---
> <dt id="appendix-B.2-2.11">ssthresh:</dt>
>           <dd style="margin-left: 1.5em" id="appendix-B.2-2.12">
>             <p id="appendix-B.2-2.12.1">Slow start threshold in bytes.  When the congestion window is below ssthresh,
3528c3555
< acknowledged.<a href="#section-b.2-2.12.1" class="pilcrow">¶</a></p>
---
> acknowledged.<a href="#appendix-B.2-2.12.1" class="pilcrow">¶</a></p>
3532,3533c3559,3560
< <p id="section-b.2-3">The congestion control pseudocode also accesses some of the variables from the
< loss recovery pseudocode.<a href="#section-b.2-3" class="pilcrow">¶</a></p>
---
> <p id="appendix-B.2-3">The congestion control pseudocode also accesses some of the variables from the
> loss recovery pseudocode.<a href="#appendix-B.2-3" class="pilcrow">¶</a></p>
3537,3544c3564,3571
< <section id="section-b.3">
<         <h2 id="name-initialization-2">
< <a href="#section-b.3" class="section-number selfRef">B.3. </a><a href="#name-initialization-2" class="section-name selfRef">Initialization</a>
<         </h2>
< <p id="section-b.3-1">At the beginning of the connection, initialize the congestion control
< variables as follows:<a href="#section-b.3-1" class="pilcrow">¶</a></p>
< <div id="section-b.3-2">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-B.3">
>         <h3 id="name-initialization-2">
> <a href="#appendix-B.3" class="section-number selfRef">B.3. </a><a href="#name-initialization-2" class="section-name selfRef">Initialization</a>
>         </h3>
> <p id="appendix-B.3-1">At the beginning of the connection, initialize the congestion control
> variables as follows:<a href="#appendix-B.3-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.3-2">
> <pre>
3551c3578
< </pre><a href="#section-b.3-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.3-2" class="pilcrow">¶</a>
3556,3563c3583,3590
< <section id="section-b.4">
<         <h2 id="name-on-packet-sent">
< <a href="#section-b.4" class="section-number selfRef">B.4. </a><a href="#name-on-packet-sent" class="section-name selfRef">On Packet Sent</a>
<         </h2>
< <p id="section-b.4-1">Whenever a packet is sent and it contains non-ACK frames, the packet
< increases bytes_in_flight.<a href="#section-b.4-1" class="pilcrow">¶</a></p>
< <div id="section-b.4-2">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-B.4">
>         <h3 id="name-on-packet-sent">
> <a href="#appendix-B.4" class="section-number selfRef">B.4. </a><a href="#name-on-packet-sent" class="section-name selfRef">On Packet Sent</a>
>         </h3>
> <p id="appendix-B.4-1">Whenever a packet is sent and it contains non-ACK frames, the packet
> increases bytes_in_flight.<a href="#appendix-B.4-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.4-2">
> <pre>
3566c3593
< </pre><a href="#section-b.4-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.4-2" class="pilcrow">¶</a>
3571,3577c3598,3604
< <section id="section-b.5">
<         <h2 id="name-on-packet-acknowledgment">
< <a href="#section-b.5" class="section-number selfRef">B.5. </a><a href="#name-on-packet-acknowledgment" class="section-name selfRef">On Packet Acknowledgment</a>
<         </h2>
< <p id="section-b.5-1">This is invoked from loss detection's OnAckReceived and is supplied with the
< newly acked_packets from sent_packets.<a href="#section-b.5-1" class="pilcrow">¶</a></p>
< <p id="section-b.5-2">In congestion avoidance, implementers that use an integer representation
---
> <section id="appendix-B.5">
>         <h3 id="name-on-packet-acknowledgment">
> <a href="#appendix-B.5" class="section-number selfRef">B.5. </a><a href="#name-on-packet-acknowledgment" class="section-name selfRef">On Packet Acknowledgment</a>
>         </h3>
> <p id="appendix-B.5-1">This is invoked from loss detection's OnAckReceived and is supplied with the
> newly acked_packets from sent_packets.<a href="#appendix-B.5-1" class="pilcrow">¶</a></p>
> <p id="appendix-B.5-2">In congestion avoidance, implementers that use an integer representation
3579,3581c3606,3608
< the alternative approach suggested in <span><a href="https://www.rfc-editor.org/rfc/rfc3465#section-2.1" class="relref">Section 2.1</a> of [<a href="#RFC3465" class="xref">RFC3465</a>]</span>.<a href="#section-b.5-2" class="pilcrow">¶</a></p>
< <div id="section-b.5-3">
< <pre class="sourcecode lang-pseudocode">
---
> the alternative approach suggested in <span><a href="https://rfc-editor.org/rfc/rfc3465#section-2.1" class="relref">Section 2.1</a> of [<a href="#RFC3465" class="cite xref">RFC3465</a>]</span>.<a href="#appendix-B.5-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.5-3">
> <pre>
3609c3636
< </pre><a href="#section-b.5-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.5-3" class="pilcrow">¶</a>
3614,3618c3641,3645
< <section id="section-b.6">
<         <h2 id="name-on-new-congestion-event">
< <a href="#section-b.6" class="section-number selfRef">B.6. </a><a href="#name-on-new-congestion-event" class="section-name selfRef">On New Congestion Event</a>
<         </h2>
< <p id="section-b.6-1">This is invoked from ProcessECN and OnPacketsLost when a new congestion event is
---
> <section id="appendix-B.6">
>         <h3 id="name-on-new-congestion-event">
> <a href="#appendix-B.6" class="section-number selfRef">B.6. </a><a href="#name-on-new-congestion-event" class="section-name selfRef">On New Congestion Event</a>
>         </h3>
> <p id="appendix-B.6-1">This is invoked from ProcessECN and OnPacketsLost when a new congestion event is
3620,3622c3647,3649
< reduces the slow start threshold and congestion window immediately.<a href="#section-b.6-1" class="pilcrow">¶</a></p>
< <div id="section-b.6-2">
< <pre class="sourcecode lang-pseudocode">
---
> reduces the slow start threshold and congestion window immediately.<a href="#appendix-B.6-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.6-2">
> <pre>
3634c3661
< </pre><a href="#section-b.6-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.6-2" class="pilcrow">¶</a>
3639,3645c3666,3672
< <section id="section-b.7">
<         <h2 id="name-process-ecn-information">
< <a href="#section-b.7" class="section-number selfRef">B.7. </a><a href="#name-process-ecn-information" class="section-name selfRef">Process ECN Information</a>
<         </h2>
< <p id="section-b.7-1">This is invoked when an ACK frame with an ECN section is received from the peer.<a href="#section-b.7-1" class="pilcrow">¶</a></p>
< <div id="section-b.7-2">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-B.7">
>         <h3 id="name-process-ecn-information">
> <a href="#appendix-B.7" class="section-number selfRef">B.7. </a><a href="#name-process-ecn-information" class="section-name selfRef">Process ECN Information</a>
>         </h3>
> <p id="appendix-B.7-1">This is invoked when an ACK frame with an ECN section is received from the peer.<a href="#appendix-B.7-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.7-2">
> <pre>
3653c3680
< </pre><a href="#section-b.7-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.7-2" class="pilcrow">¶</a>
3658,3664c3685,3691
< <section id="section-b.8">
<         <h2 id="name-on-packets-lost">
< <a href="#section-b.8" class="section-number selfRef">B.8. </a><a href="#name-on-packets-lost" class="section-name selfRef">On Packets Lost</a>
<         </h2>
< <p id="section-b.8-1">This is invoked when DetectAndRemoveLostPackets deems packets lost.<a href="#section-b.8-1" class="pilcrow">¶</a></p>
< <div id="section-b.8-2">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-B.8">
>         <h3 id="name-on-packets-lost">
> <a href="#appendix-B.8" class="section-number selfRef">B.8. </a><a href="#name-on-packets-lost" class="section-name selfRef">On Packets Lost</a>
>         </h3>
> <p id="appendix-B.8-1">This is invoked when DetectAndRemoveLostPackets deems packets lost.<a href="#appendix-B.8-1" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.8-2">
> <pre>
3689c3716
< </pre><a href="#section-b.8-2" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.8-2" class="pilcrow">¶</a>
3694,3702c3721,3729
< <section id="section-b.9">
<         <h2 id="name-removing-discarded-packets-">
< <a href="#section-b.9" class="section-number selfRef">B.9. </a><a href="#name-removing-discarded-packets-" class="section-name selfRef">Removing Discarded Packets from Bytes in Flight</a>
<         </h2>
< <p id="section-b.9-1">When Initial or Handshake keys are discarded, packets sent in that space no
< longer count toward bytes in flight.<a href="#section-b.9-1" class="pilcrow">¶</a></p>
< <p id="section-b.9-2">Pseudocode for RemoveFromBytesInFlight follows:<a href="#section-b.9-2" class="pilcrow">¶</a></p>
< <div id="section-b.9-3">
< <pre class="sourcecode lang-pseudocode">
---
> <section id="appendix-B.9">
>         <h3 id="name-removing-discarded-packets-">
> <a href="#appendix-B.9" class="section-number selfRef">B.9. </a><a href="#name-removing-discarded-packets-" class="section-name selfRef">Removing Discarded Packets from Bytes in Flight</a>
>         </h3>
> <p id="appendix-B.9-1">When Initial or Handshake keys are discarded, packets sent in that space no
> longer count toward bytes in flight.<a href="#appendix-B.9-1" class="pilcrow">¶</a></p>
> <p id="appendix-B.9-2">Pseudocode for RemoveFromBytesInFlight follows:<a href="#appendix-B.9-2" class="pilcrow">¶</a></p>
> <div class="lang-pseudocode sourcecode" id="appendix-B.9-3">
> <pre>
3708c3735
< </pre><a href="#section-b.9-3" class="pilcrow">¶</a>
---
> </pre><a href="#appendix-B.9-3" class="pilcrow">¶</a>
3715c3742
< <section id="section-appendix.c">
---
> <section id="appendix-C">
3719c3746
< <p id="section-appendix.c-1">The IETF QUIC Working Group received an enormous amount of support from many
---
> <p id="appendix-C-1">The IETF QUIC Working Group received an enormous amount of support from many
3721c3748
< document:<a href="#section-appendix.c-1" class="pilcrow">¶</a></p>
---
> document:<a href="#appendix-C-1" class="pilcrow">¶</a></p>
3723,3724c3750,3751
< <li class="compact" id="section-appendix.c-2.1">
<           <p id="section-appendix.c-2.1.1"><span class="contact-name">Alessandro Ghedini</span><a href="#section-appendix.c-2.1.1" class="pilcrow">¶</a></p>
---
> <li class="compact" id="appendix-C-2.1">
>           <p id="appendix-C-2.1.1"><span class="contact-name">Alessandro Ghedini</span><a href="#appendix-C-2.1.1" class="pilcrow">¶</a></p>
3726,3727c3753,3754
<         <li class="compact" id="section-appendix.c-2.2">
<           <p id="section-appendix.c-2.2.1"><span class="contact-name">Benjamin Saunders</span><a href="#section-appendix.c-2.2.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.2">
>           <p id="appendix-C-2.2.1"><span class="contact-name">Benjamin Saunders</span><a href="#appendix-C-2.2.1" class="pilcrow">¶</a></p>
3729,3730c3756,3757
<         <li class="compact" id="section-appendix.c-2.3">
<           <p id="section-appendix.c-2.3.1"><span class="contact-name">Gorry Fairhurst</span><a href="#section-appendix.c-2.3.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.3">
>           <p id="appendix-C-2.3.1"><span class="contact-name">Gorry Fairhurst</span><a href="#appendix-C-2.3.1" class="pilcrow">¶</a></p>
3732,3733c3759,3760
<         <li class="compact" id="section-appendix.c-2.4">
<           <p id="section-appendix.c-2.4.1"><span class="contact-name"><span class="non-ascii">山本和彦</span> (<span class="ascii">Kazu Yamamoto</span>)</span><a href="#section-appendix.c-2.4.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.4">
>           <p id="appendix-C-2.4.1"><span class="contact-name"><span class="non-ascii">山本和彦</span> (<span class="ascii">Kazu Yamamoto</span>)</span><a href="#appendix-C-2.4.1" class="pilcrow">¶</a></p>
3735,3736c3762,3763
<         <li class="compact" id="section-appendix.c-2.5">
<           <p id="section-appendix.c-2.5.1"><span class="contact-name"><span class="non-ascii">奥 一穂</span> (<span class="ascii">Kazuho Oku</span>)</span><a href="#section-appendix.c-2.5.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.5">
>           <p id="appendix-C-2.5.1"><span class="contact-name"><span class="non-ascii">奥 一穂</span> (<span class="ascii">Kazuho Oku</span>)</span><a href="#appendix-C-2.5.1" class="pilcrow">¶</a></p>
3738,3739c3765,3766
<         <li class="compact" id="section-appendix.c-2.6">
<           <p id="section-appendix.c-2.6.1"><span class="contact-name">Lars Eggert</span><a href="#section-appendix.c-2.6.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.6">
>           <p id="appendix-C-2.6.1"><span class="contact-name">Lars Eggert</span><a href="#appendix-C-2.6.1" class="pilcrow">¶</a></p>
3741,3742c3768,3769
<         <li class="compact" id="section-appendix.c-2.7">
<           <p id="section-appendix.c-2.7.1"><span class="contact-name">Magnus Westerlund</span><a href="#section-appendix.c-2.7.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.7">
>           <p id="appendix-C-2.7.1"><span class="contact-name">Magnus Westerlund</span><a href="#appendix-C-2.7.1" class="pilcrow">¶</a></p>
3744,3745c3771,3772
<         <li class="compact" id="section-appendix.c-2.8">
<           <p id="section-appendix.c-2.8.1"><span class="contact-name">Marten Seemann</span><a href="#section-appendix.c-2.8.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.8">
>           <p id="appendix-C-2.8.1"><span class="contact-name">Marten Seemann</span><a href="#appendix-C-2.8.1" class="pilcrow">¶</a></p>
3747,3748c3774,3775
<         <li class="compact" id="section-appendix.c-2.9">
<           <p id="section-appendix.c-2.9.1"><span class="contact-name">Martin Duke</span><a href="#section-appendix.c-2.9.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.9">
>           <p id="appendix-C-2.9.1"><span class="contact-name">Martin Duke</span><a href="#appendix-C-2.9.1" class="pilcrow">¶</a></p>
3750,3751c3777,3778
<         <li class="compact" id="section-appendix.c-2.10">
<           <p id="section-appendix.c-2.10.1"><span class="contact-name">Martin Thomson</span><a href="#section-appendix.c-2.10.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.10">
>           <p id="appendix-C-2.10.1"><span class="contact-name">Martin Thomson</span><a href="#appendix-C-2.10.1" class="pilcrow">¶</a></p>
3753,3754c3780,3781
<         <li class="compact" id="section-appendix.c-2.11">
<           <p id="section-appendix.c-2.11.1"><span class="contact-name">Mirja Kühlewind</span><a href="#section-appendix.c-2.11.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.11">
>           <p id="appendix-C-2.11.1"><span class="contact-name">Mirja Kühlewind</span><a href="#appendix-C-2.11.1" class="pilcrow">¶</a></p>
3756,3757c3783,3784
<         <li class="compact" id="section-appendix.c-2.12">
<           <p id="section-appendix.c-2.12.1"><span class="contact-name">Nick Banks</span><a href="#section-appendix.c-2.12.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.12">
>           <p id="appendix-C-2.12.1"><span class="contact-name">Nick Banks</span><a href="#appendix-C-2.12.1" class="pilcrow">¶</a></p>
3759,3760c3786,3787
<         <li class="compact" id="section-appendix.c-2.13">
<           <p id="section-appendix.c-2.13.1"><span class="contact-name">Praveen Balasubramanian</span><a href="#section-appendix.c-2.13.1" class="pilcrow">¶</a></p>
---
>         <li class="compact" id="appendix-C-2.13">
>           <p id="appendix-C-2.13.1"><span class="contact-name">Praveen Balasubramanian</span><a href="#appendix-C-2.13.1" class="pilcrow">¶</a></p>
3766c3793
< <section id="section-appendix.d">
---
> <section id="appendix-D">
