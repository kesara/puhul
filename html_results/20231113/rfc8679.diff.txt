19c19
< <meta content="xml2rfc 2.35.0" name="generator">
---
> <meta content="xml2rfc 3.18.2" name="generator">
24c24,40
< <link href="rfc8679.xml" type="application/rfc+xml" rel="alternate">
---
> <!-- Generator version information:
>   xml2rfc 3.18.2
>     Python 3.11.6
>     ConfigArgParse 1.7
>     google-i18n-address 3.1.0
>     intervaltree 3.1.0
>     Jinja2 3.1.2
>     lxml 4.9.3
>     platformdirs 4.0.0
>     pycountry 22.3.5
>     PyYAML 6.0.1
>     requests 2.31.0
>     setuptools 65.5.0
>     six 1.16.0
>     wcwidth 0.2.9
> -->
> <link href="rfc/rfc8679.xml" rel="alternate" type="application/rfc+xml">
34c50
<   commented changes found necssary during the development of the v3
---
>   commented changes found necessary during the development of the v3
43a60,65
> :root {
>   --font-sans: 'Noto Sans', Arial, Helvetica, sans-serif;
>   --font-serif: 'Noto Serif', 'Times', 'Times New Roman', serif;
>   --font-mono: 'Roboto Mono', Courier, 'Courier New', monospace;
> }
> 
46d67
<   width: extend-to-zoom;
61c82
<   font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
---
>   font-family: var(--font-sans);
63a85
>   overflow-wrap: break-word;
149a172,180
> svg[font-family~="serif" i], svg [font-family~="serif" i] {
>   font-family: var(--font-serif);
> }
> svg[font-family~="sans-serif" i], svg [font-family~="sans-serif" i] {
>   font-family: var(--font-sans);
> }
> svg[font-family~="monospace" i], svg [font-family~="monospace" i] {
>   font-family: var(--font-mono);
> }
164,167d194
<   border: none;
<   /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
<      support flexbox yet.
<   */
168a196
>   border: none;
191a220,222
> ul.ulBare, li.ulBare {
>   margin-left: 0em !important;
> }
233c264,265
< a[href].selfRef {
---
> a[href].selfRef,
> .iref + a[href].internal {
243c275
< tt, code, pre, code {
---
> tt, code, pre {
245c277
<   font-family: 'Roboto Mono', monospace;
---
>   font-family: var(--font-mono);
284a317,319
> blockquote > *:last-child {
>   margin-bottom: 0;
> }
374a410,415
> /* Fix PDF info block run off issue */
> @media print {
>   #identifiers dd {
>     float: none;
>   }
> }
476c517
<   font-family: "Noto Sans",Arial,Helvetica,sans-serif;
---
>   font-family: var(--font-sans);
616d656
< 
638a679,681
>   .breakable pre {
>     break-inside: auto;
>   }
706c749
<   /* The follwing is commented out here, but set appropriately by in code, as
---
>   /* The following is commented out here, but set appropriately by in code, as
806c849
< tt, code, pre, code {
---
> tt, code, pre {
811c854
< pre.sourcecode,
---
> .sourcecode pre,
847c890
< /* Make the alternative author contact informatio look less like just another
---
> /* Make the alternative author contact information look less like just another
925,930d967
< /* Avoid wrapping of URLs in references */
< @media screen {
<   .references a {
<     white-space: nowrap;
<   }
< }
1001c1038
<   margin: 0 0 0.25em 0;
---
>   margin-bottom: 0.25em;
1015c1052
<   margin-bottom: 0;
---
>   margin-bottom: 0.5em;
1033a1071,1072
>   .artwork,
>   .artwork > pre,
1037,1038c1076,1209
< }</style>
< <link href="rfc-local.css" type="text/css" rel="stylesheet">
---
> }
> /* Avoid narrow tables forcing too narrow table captions, which may render badly */
> table {
>   min-width: 20em;
> }
> /* ol type a */
> ol.type-a { list-style-type: lower-alpha; }
> ol.type-A { list-style-type: upper-alpha; }
> ol.type-i { list-style-type: lower-roman; }
> ol.type-I { list-style-type: lower-roman; }
> /* Apply the print table and row borders in general, on request from the RPC,
> and increase the contrast between border and odd row background slightly */
> table {
>   border: 1px solid #ddd;
> }
> td {
>   border-top: 1px solid #ddd;
> }
> tr {
>   break-inside: avoid;
> }
> tr:nth-child(2n+1) > td {
>   background-color: #f8f8f8;
> }
> /* Use style rules to govern display of the TOC. */
> @media screen and (max-width: 1023px) {
>   #toc nav { display: none; }
>   #toc.active nav { display: block; }
> }
> /* Add support for keepWithNext */
> .keepWithNext {
>   break-after: avoid-page;
>   break-after: avoid-page;
> }
> /* Add support for keepWithPrevious */
> .keepWithPrevious {
>   break-before: avoid-page;
> }
> /* Change the approach to avoiding breaks inside artwork etc. */
> figure, pre, table, .artwork, .sourcecode  {
>   break-before: auto;
>   break-after: auto;
> }
> /* Avoid breaks between <dt> and <dd> */
> dl {
>   break-before: auto;
>   break-inside: auto;
> }
> dt {
>   break-before: auto;
>   break-after: avoid-page;
> }
> dd {
>   break-before: avoid-page;
>   break-after: auto;
>   orphans: 3;
>   widows: 3
> }
> span.break, dd.break {
>   margin-bottom: 0;
>   min-height: 0;
>   break-before: auto;
>   break-inside: auto;
>   break-after: auto;
> }
> /* Undo break-before ToC */
> @media print {
>   #toc {
>     break-before: auto;
>   }
> }
> /* Text in compact lists should not get extra bottom margin space,
>    since that would makes the list not compact */
> ul.compact p, .ulCompact p,
> ol.compact p, .olCompact p {
>  margin: 0;
> }
> /* But the list as a whole needs the extra space at the end */
> section ul.compact,
> section .ulCompact,
> section ol.compact,
> section .olCompact {
>   margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
> }
> /* The tt and code background above interferes with for instance table cell
>    backgrounds.  Changed to something a bit more selective. */
> tt, code {
>   background-color: transparent;
> }
> p tt, p code, li tt, li code {
>   background-color: #f8f8f8;
> }
> /* Tweak the pre margin -- 0px doesn't come out well */
> pre {
>    margin-top: 0.5px;
> }
> /* Tweak the compact list text */
> ul.compact, .ulCompact,
> ol.compact, .olCompact,
> dl.compact, .dlCompact {
>   line-height: normal;
> }
> /* Don't add top margin for nested lists */
> li > ul, li > ol, li > dl,
> dd > ul, dd > ol, dd > dl,
> dl > dd > dl {
>   margin-top: initial;
> }
> /* Elements that should not be rendered on the same line as a <dt> */
> /* This should match the element list in writer.text.TextWriter.render_dl() */
> dd > div.artwork:first-child,
> dd > aside:first-child,
> dd > figure:first-child,
> dd > ol:first-child,
> dd > div.sourcecode:first-child,
> dd > table:first-child,
> dd > ul:first-child {
>   clear: left;
> }
> /* fix for weird browser behaviour when <dd/> is empty */
> dt+dd:empty::before{
>   content: "\00a0";
> }
> /* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
> li > p {
>   margin-bottom: 0.5em
> }
> /* Don't let p margin spill out from inside list items */
> li > p:last-of-type:only-child {
>   margin-bottom: 0;
> }
> </style>
> <link href="rfc-local.css" rel="stylesheet" type="text/css">
> <link href="https://datatracker.ietf.org/doc/draft-ietf-mpls-egress-protection-framework-07" rel="prev">
1041c1212
<   <link href="https://datatracker.ietf.org/doc/draft-ietf-mpls-egress-protection-framework-07" rel="prev">
---
>   <script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
1043,1044c1214,1215
< <body>
< <script src="https://www.rfc-editor.org/js/metadata.min.js"></script>
---
> <body class="xml2rfc">
> <script src="metadata.min.js"></script>
1153,1155c1324,1326
< <nav class="toc"><ul class="toc ulEmpty">
< <li class="toc ulEmpty" id="section-toc.1-1.1">
<             <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
---
> <nav class="toc"><ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
>             <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="auto internal xref">1</a>.  <a href="#name-introduction" class="internal xref">Introduction</a></p>
1157,1158c1328,1329
<           <li class="toc ulEmpty" id="section-toc.1-1.2">
<             <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-specification-of-requiremen" class="xref">Specification of Requirements</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
>             <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="auto internal xref">2</a>.  <a href="#name-specification-of-requiremen" class="internal xref">Specification of Requirements</a></p>
1160,1161c1331,1332
<           <li class="toc ulEmpty" id="section-toc.1-1.3">
<             <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
>             <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="auto internal xref">3</a>.  <a href="#name-terminology" class="internal xref">Terminology</a></p>
1163,1164c1334,1335
<           <li class="toc ulEmpty" id="section-toc.1-1.4">
<             <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-requirements" class="xref">Requirements</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
>             <p id="section-toc.1-1.4.1" class="keepWithNext"><a href="#section-4" class="auto internal xref">4</a>.  <a href="#name-requirements" class="internal xref">Requirements</a></p>
1166,1170c1337,1341
<           <li class="toc ulEmpty" id="section-toc.1-1.5">
<             <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-egress-node-protection" class="xref">Egress Node Protection</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
< <ul class="toc ulEmpty">
< <li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
<                 <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-reference-topology" class="xref">Reference Topology</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
>             <p id="section-toc.1-1.5.1" class="keepWithNext"><a href="#section-5" class="auto internal xref">5</a>.  <a href="#name-egress-node-protection" class="internal xref">Egress Node Protection</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
>                 <p id="section-toc.1-1.5.2.1.1" class="keepWithNext"><a href="#section-5.1" class="auto internal xref">5.1</a>.  <a href="#name-reference-topology" class="internal xref">Reference Topology</a></p>
1172,1173c1343,1344
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
<                 <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-egress-node-failure-and-det" class="xref">Egress Node Failure and Detection</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
>                 <p id="section-toc.1-1.5.2.2.1" class="keepWithNext"><a href="#section-5.2" class="auto internal xref">5.2</a>.  <a href="#name-egress-node-failure-and-det" class="internal xref">Egress Node Failure and Detection</a></p>
1175,1176c1346,1347
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
<                 <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-protector-and-plr" class="xref">Protector and PLR</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
>                 <p id="section-toc.1-1.5.2.3.1" class="keepWithNext"><a href="#section-5.3" class="auto internal xref">5.3</a>.  <a href="#name-protector-and-plr" class="internal xref">Protector and PLR</a></p>
1178,1179c1349,1350
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.4">
<                 <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-protected-egress" class="xref">Protected Egress</a><a href="#section-toc.1-1.5.2.4.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
>                 <p id="section-toc.1-1.5.2.4.1" class="keepWithNext"><a href="#section-5.4" class="auto internal xref">5.4</a>.  <a href="#name-protected-egress" class="internal xref">Protected Egress</a></p>
1181,1182c1352,1353
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.5">
<                 <p id="section-toc.1-1.5.2.5.1"><a href="#section-5.5" class="xref">5.5</a>.  <a href="#name-egress-protected-tunnel-and" class="xref">Egress-Protected Tunnel and Service</a><a href="#section-toc.1-1.5.2.5.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.5">
>                 <p id="section-toc.1-1.5.2.5.1" class="keepWithNext"><a href="#section-5.5" class="auto internal xref">5.5</a>.  <a href="#name-egress-protected-tunnel-and" class="internal xref">Egress-Protected Tunnel and Service</a></p>
1184,1185c1355,1356
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.6">
<                 <p id="section-toc.1-1.5.2.6.1"><a href="#section-5.6" class="xref">5.6</a>.  <a href="#name-egress-protection-bypass-tu" class="xref">Egress-Protection Bypass Tunnel</a><a href="#section-toc.1-1.5.2.6.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.6">
>                 <p id="section-toc.1-1.5.2.6.1" class="keepWithNext"><a href="#section-5.6" class="auto internal xref">5.6</a>.  <a href="#name-egress-protection-bypass-tu" class="internal xref">Egress-Protection Bypass Tunnel</a></p>
1187,1188c1358,1359
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.7">
<                 <p id="section-toc.1-1.5.2.7.1"><a href="#section-5.7" class="xref">5.7</a>.  <a href="#name-context-id-context-label-an" class="xref">Context ID, Context Label, and Context-Based Forwarding</a><a href="#section-toc.1-1.5.2.7.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.7">
>                 <p id="section-toc.1-1.5.2.7.1" class="keepWithNext"><a href="#section-5.7" class="auto internal xref">5.7</a>.  <a href="#name-context-id-context-label-an" class="internal xref">Context ID, Context Label, and Context-Based Forwarding</a></p>
1190,1191c1361,1362
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.8">
<                 <p id="section-toc.1-1.5.2.8.1"><a href="#section-5.8" class="xref">5.8</a>.  <a href="#name-advertisement-and-path-reso" class="xref">Advertisement and Path Resolution for Context ID</a><a href="#section-toc.1-1.5.2.8.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.8">
>                 <p id="section-toc.1-1.5.2.8.1" class="keepWithNext"><a href="#section-5.8" class="auto internal xref">5.8</a>.  <a href="#name-advertisement-and-path-reso" class="internal xref">Advertisement and Path Resolution for Context ID</a></p>
1193,1194c1364,1365
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.9">
<                 <p id="section-toc.1-1.5.2.9.1"><a href="#section-5.9" class="xref">5.9</a>.  <a href="#name-egress-protection-bypass-tun" class="xref">Egress-Protection Bypass Tunnel Establishment</a><a href="#section-toc.1-1.5.2.9.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.9">
>                 <p id="section-toc.1-1.5.2.9.1" class="keepWithNext"><a href="#section-5.9" class="auto internal xref">5.9</a>.  <a href="#name-egress-protection-bypass-tun" class="internal xref">Egress-Protection Bypass Tunnel Establishment</a></p>
1196,1197c1367,1368
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.10">
<                 <p id="section-toc.1-1.5.2.10.1"><a href="#section-5.10" class="xref">5.10</a>. <a href="#name-local-repair-on-plr" class="xref">Local Repair on PLR</a><a href="#section-toc.1-1.5.2.10.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.10">
>                 <p id="section-toc.1-1.5.2.10.1" class="keepWithNext"><a href="#section-5.10" class="auto internal xref">5.10</a>. <a href="#name-local-repair-on-plr" class="internal xref">Local Repair on PLR</a></p>
1199,1200c1370,1371
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.11">
<                 <p id="section-toc.1-1.5.2.11.1"><a href="#section-5.11" class="xref">5.11</a>. <a href="#name-service-label-distribution-" class="xref">Service Label Distribution from Egress Router to Protector</a><a href="#section-toc.1-1.5.2.11.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.11">
>                 <p id="section-toc.1-1.5.2.11.1" class="keepWithNext"><a href="#section-5.11" class="auto internal xref">5.11</a>. <a href="#name-service-label-distribution-" class="internal xref">Service Label Distribution from Egress Router to Protector</a></p>
1202,1203c1373,1374
<               <li class="toc ulEmpty" id="section-toc.1-1.5.2.12">
<                 <p id="section-toc.1-1.5.2.12.1"><a href="#section-5.12" class="xref">5.12</a>. <a href="#name-centralized-protector-mode" class="xref">Centralized Protector Mode</a><a href="#section-toc.1-1.5.2.12.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.12">
>                 <p id="section-toc.1-1.5.2.12.1" class="keepWithNext"><a href="#section-5.12" class="auto internal xref">5.12</a>. <a href="#name-centralized-protector-mode" class="internal xref">Centralized Protector Mode</a></p>
1207,1208c1378,1379
<           <li class="toc ulEmpty" id="section-toc.1-1.6">
<             <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-egress-link-protection" class="xref">Egress Link Protection</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
>             <p id="section-toc.1-1.6.1" class="keepWithNext"><a href="#section-6" class="auto internal xref">6</a>.  <a href="#name-egress-link-protection" class="internal xref">Egress Link Protection</a></p>
1210,1211c1381,1382
<           <li class="toc ulEmpty" id="section-toc.1-1.7">
<             <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-global-repair" class="xref">Global Repair</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
>             <p id="section-toc.1-1.7.1" class="keepWithNext"><a href="#section-7" class="auto internal xref">7</a>.  <a href="#name-global-repair" class="internal xref">Global Repair</a></p>
1213,1214c1384,1385
<           <li class="toc ulEmpty" id="section-toc.1-1.8">
<             <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-operational-considerations" class="xref">Operational Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
>             <p id="section-toc.1-1.8.1" class="keepWithNext"><a href="#section-8" class="auto internal xref">8</a>.  <a href="#name-operational-considerations" class="internal xref">Operational Considerations</a></p>
1216,1217c1387,1388
<           <li class="toc ulEmpty" id="section-toc.1-1.9">
<             <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-general-context-based-forwa" class="xref">General Context-Based Forwarding</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
>             <p id="section-toc.1-1.9.1" class="keepWithNext"><a href="#section-9" class="auto internal xref">9</a>.  <a href="#name-general-context-based-forwa" class="internal xref">General Context-Based Forwarding</a></p>
1219,1223c1390,1394
<           <li class="toc ulEmpty" id="section-toc.1-1.10">
<             <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-example-layer-3-vpn-egress-" class="xref">Example: Layer 3 VPN Egress Protection</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
< <ul class="toc ulEmpty">
< <li class="toc ulEmpty" id="section-toc.1-1.10.2.1">
<                 <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-egress-node-protection-2" class="xref">Egress Node Protection</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
>             <p id="section-toc.1-1.10.1" class="keepWithNext"><a href="#section-10" class="auto internal xref">10</a>. <a href="#name-example-layer-3-vpn-egress-" class="internal xref">Example: Layer 3 VPN Egress Protection</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
>                 <p id="section-toc.1-1.10.2.1.1" class="keepWithNext"><a href="#section-10.1" class="auto internal xref">10.1</a>.  <a href="#name-egress-node-protection-2" class="internal xref">Egress Node Protection</a></p>
1225,1226c1396,1397
<               <li class="toc ulEmpty" id="section-toc.1-1.10.2.2">
<                 <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-egress-link-protection-2" class="xref">Egress Link Protection</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
>                 <p id="section-toc.1-1.10.2.2.1" class="keepWithNext"><a href="#section-10.2" class="auto internal xref">10.2</a>.  <a href="#name-egress-link-protection-2" class="internal xref">Egress Link Protection</a></p>
1228,1229c1399,1400
<               <li class="toc ulEmpty" id="section-toc.1-1.10.2.3">
<                 <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-global-repair-2" class="xref">Global Repair</a><a href="#section-toc.1-1.10.2.3.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.3">
>                 <p id="section-toc.1-1.10.2.3.1" class="keepWithNext"><a href="#section-10.3" class="auto internal xref">10.3</a>.  <a href="#name-global-repair-2" class="internal xref">Global Repair</a></p>
1231,1232c1402,1403
<               <li class="toc ulEmpty" id="section-toc.1-1.10.2.4">
<                 <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="xref">10.4</a>.  <a href="#name-other-modes-of-vpn-label-al" class="xref">Other Modes of VPN Label Allocation</a><a href="#section-toc.1-1.10.2.4.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.4">
>                 <p id="section-toc.1-1.10.2.4.1" class="keepWithNext"><a href="#section-10.4" class="auto internal xref">10.4</a>.  <a href="#name-other-modes-of-vpn-label-al" class="internal xref">Other Modes of VPN Label Allocation</a></p>
1236,1237c1407,1408
<           <li class="toc ulEmpty" id="section-toc.1-1.11">
<             <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
>             <p id="section-toc.1-1.11.1" class="keepWithNext"><a href="#section-11" class="auto internal xref">11</a>. <a href="#name-iana-considerations" class="internal xref">IANA Considerations</a></p>
1239,1240c1410,1411
<           <li class="toc ulEmpty" id="section-toc.1-1.12">
<             <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
>             <p id="section-toc.1-1.12.1" class="keepWithNext"><a href="#section-12" class="auto internal xref">12</a>. <a href="#name-security-considerations" class="internal xref">Security Considerations</a></p>
1242,1246c1413,1417
<           <li class="toc ulEmpty" id="section-toc.1-1.13">
<             <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
< <ul class="toc ulEmpty">
< <li class="toc ulEmpty" id="section-toc.1-1.13.2.1">
<                 <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="xref">13.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.13.2.1.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
>             <p id="section-toc.1-1.13.1" class="keepWithNext"><a href="#section-13" class="auto internal xref">13</a>. <a href="#name-references" class="internal xref">References</a></p>
> <ul class="compact toc ulBare ulEmpty">
> <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
>                 <p id="section-toc.1-1.13.2.1.1" class="keepWithNext"><a href="#section-13.1" class="auto internal xref">13.1</a>.  <a href="#name-normative-references" class="internal xref">Normative References</a></p>
1248,1249c1419,1420
<               <li class="toc ulEmpty" id="section-toc.1-1.13.2.2">
<                 <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="xref">13.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.13.2.2.1" class="pilcrow">¶</a></p>
---
>               <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
>                 <p id="section-toc.1-1.13.2.2.1" class="keepWithNext"><a href="#section-13.2" class="auto internal xref">13.2</a>.  <a href="#name-informative-references" class="internal xref">Informative References</a></p>
1253,1254c1424,1425
<           <li class="toc ulEmpty" id="section-toc.1-1.14">
<             <p id="section-toc.1-1.14.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
>             <p id="section-toc.1-1.14.1" class="keepWithNext"><a href="#appendix-A" class="auto internal xref"></a><a href="#name-acknowledgements" class="internal xref">Acknowledgements</a></p>
1256,1257c1427,1428
<           <li class="toc ulEmpty" id="section-toc.1-1.15">
<             <p id="section-toc.1-1.15.1"><a href="#section-appendix.b" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.15.1" class="pilcrow">¶</a></p>
---
>           <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
>             <p id="section-toc.1-1.15.1" class="keepWithNext"><a href="#appendix-B" class="auto internal xref"></a><a href="#name-authors-addresses" class="internal xref">Authors' Addresses</a></p>
1271,1272c1442,1443
<        Today, local-repair-based fast reroute mechanisms (see <span>[<a href="#RFC4090" class="xref">RFC4090</a>]</span>, <span>[<a href="#RFC5286" class="xref">RFC5286</a>]</span>, <span>[<a href="#RFC7490" class="xref">RFC7490</a>]</span>, and
< <span>[<a href="#RFC7812" class="xref">RFC7812</a>]</span>) have been widely deployed to protect MPLS tunnels against transit link/node failures, with traffic restoration time in the order of tens of milliseconds. Local repair refers to the scenario where the router upstream to an anticipated failure, a.k.a., PLR, pre-establishes a bypass tunnel to the router downstream of the failure, a.k.a., Merge Point (MP), pre-installs the forwarding state of the bypass tunnel in the data plane, and uses a rapid mechanism (e.g., link-layer Operations, Administration, and Maintenance (OAM), Bidirectional Forwarding Detection (BFD), and others) to locally detect the failure in the data plane. When the failure occurs, the PLR reroutes traffic through the bypass tunnel to the MP, allowing the traffic to continue to flow to the tunnel's egress router.<a href="#section-1-2" class="pilcrow">¶</a></p>
---
>        Today, local-repair-based fast reroute mechanisms (see <span>[<a href="#RFC4090" class="cite xref">RFC4090</a>]</span>, <span>[<a href="#RFC5286" class="cite xref">RFC5286</a>]</span>, <span>[<a href="#RFC7490" class="cite xref">RFC7490</a>]</span>, and
> <span>[<a href="#RFC7812" class="cite xref">RFC7812</a>]</span>) have been widely deployed to protect MPLS tunnels against transit link/node failures, with traffic restoration time in the order of tens of milliseconds. Local repair refers to the scenario where the router upstream to an anticipated failure, a.k.a., PLR, pre-establishes a bypass tunnel to the router downstream of the failure, a.k.a., Merge Point (MP), pre-installs the forwarding state of the bypass tunnel in the data plane, and uses a rapid mechanism (e.g., link-layer Operations, Administration, and Maintenance (OAM), Bidirectional Forwarding Detection (BFD), and others) to locally detect the failure in the data plane. When the failure occurs, the PLR reroutes traffic through the bypass tunnel to the MP, allowing the traffic to continue to flow to the tunnel's egress router.<a href="#section-1-2" class="pilcrow">¶</a></p>
1278c1449
<        This framework requires that the destination (a CE or site) of a service <span class="bcp14">MUST</span> be dual-homed or have dual paths to an MPLS network, via two MPLS edge routers. One of the routers is the egress router of the service's transport tunnel, and the other is a backup egress router that hosts a "backup service instance". In the "co-located" protector mode in this document, the backup egress router serves as the protector; hence, the backup service instance acts as the protection service instance. In the "centralized" protector mode (<a href="#centralized" class="xref">Section 5.12</a>), the protector and the backup egress router are decoupled, and the protection service instance and the backup service instance are hosted separately by the two routers.<a href="#section-1-5" class="pilcrow">¶</a></p>
---
>        This framework requires that the destination (a CE or site) of a service <span class="bcp14">MUST</span> be dual-homed or have dual paths to an MPLS network, via two MPLS edge routers. One of the routers is the egress router of the service's transport tunnel, and the other is a backup egress router that hosts a "backup service instance". In the "co-located" protector mode in this document, the backup egress router serves as the protector; hence, the backup service instance acts as the protection service instance. In the "centralized" protector mode (<a href="#centralized" class="auto internal xref">Section 5.12</a>), the protector and the backup egress router are decoupled, and the protection service instance and the backup service instance are hosted separately by the two routers.<a href="#section-1-5" class="pilcrow">¶</a></p>
1289c1460
< example of such extension is <span>[<a href="#RFC8400" class="xref">RFC8400</a>]</span>. The framework does see the need for extensions of IGPs and service label distribution protocols in some procedures, particularly for supporting protection establishment and context label switching. This document provides guidelines for these extensions, but it leaves the specific details to separate documents.<a href="#section-1-8" class="pilcrow">¶</a></p>
---
> example of such extension is <span>[<a href="#RFC8400" class="cite xref">RFC8400</a>]</span>. The framework does see the need for extensions of IGPs and service label distribution protocols in some procedures, particularly for supporting protection establishment and context label switching. This document provides guidelines for these extensions, but it leaves the specific details to separate documents.<a href="#section-1-8" class="pilcrow">¶</a></p>
1296c1467
< mechanism <span>[<a href="#I-D.ietf-rtgwg-bgp-pic" class="xref">BGP-PIC</a>]</span> for BGP-established services. Compared with these mechanisms, this framework is considered faster in traffic restoration, due to the nature of local failure detection and local repair. It is <span class="bcp14">RECOMMENDED</span> that the framework be used in conjunction with control-plane convergence or global repair, in order to take the advantages of both approaches. That is, the framework provides fast and temporary repair, while control-plane convergence or global repair provides ultimate and permanent repair.<a href="#section-1-9" class="pilcrow">¶</a></p>
---
> mechanism <span>[<a href="#I-D.ietf-rtgwg-bgp-pic" class="cite xref">BGP-PIC</a>]</span> for BGP-established services. Compared with these mechanisms, this framework is considered faster in traffic restoration, due to the nature of local failure detection and local repair. It is <span class="bcp14">RECOMMENDED</span> that the framework be used in conjunction with control-plane convergence or global repair, in order to take the advantages of both approaches. That is, the framework provides fast and temporary repair, while control-plane convergence or global repair provides ultimate and permanent repair.<a href="#section-1-9" class="pilcrow">¶</a></p>
1307,1308c1478,1479
<     to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>
<         <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals,
---
>     to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="cite xref">RFC2119</a>]</span>
>         <span>[<a href="#RFC8174" class="cite xref">RFC8174</a>]</span> when, and only when, they appear in all capitals,
1316c1487
< <dl class="dlNewline" id="section-3-1">
---
> <span class="break"></span><dl class="dlNewline" id="section-3-1">
1318c1489
<         <dd id="section-3-1.2">A router at the egress endpoint of a tunnel. It hosts service instances for all the services carried by the tunnel and has connectivity with the destinations of the services.<a href="#section-3-1.2" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.2">A router at the egress endpoint of a tunnel. It hosts service instances for all the services carried by the tunnel and has connectivity with the destinations of the services.<a href="#section-3-1.2" class="pilcrow">¶</a>
1319a1491
>         <dd class="break"></dd>
1321c1493
<         <dd id="section-3-1.4">A failure of an egress router.<a href="#section-3-1.4" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.4">A failure of an egress router.<a href="#section-3-1.4" class="pilcrow">¶</a>
1322a1495
>         <dd class="break"></dd>
1325c1498
<         <dd id="section-3-1.6">A failure of the egress link (e.g., PE-CE link, attachment circuit) of a service.<a href="#section-3-1.6" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.6">A failure of the egress link (e.g., PE-CE link, attachment circuit) of a service.<a href="#section-3-1.6" class="pilcrow">¶</a>
1326a1500
>         <dd class="break"></dd>
1329c1503
<         <dd id="section-3-1.8"> An egress node failure or an egress link failure.<a href="#section-3-1.8" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.8"> An egress node failure or an egress link failure.<a href="#section-3-1.8" class="pilcrow">¶</a>
1330a1505
>         <dd class="break"></dd>
1333c1508
<         <dd id="section-3-1.10">A tunnel whose egress router is protected by a mechanism according to this framework. The egress router is hence called a protected egress router.<a href="#section-3-1.10" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.10">A tunnel whose egress router is protected by a mechanism according to this framework. The egress router is hence called a protected egress router.<a href="#section-3-1.10" class="pilcrow">¶</a>
1334a1510
>         <dd class="break"></dd>
1337c1513
<         <dd id="section-3-1.12">An IP or MPLS service that is carried by an egress-protected tunnel and hence protected by a mechanism according to this framework.<a href="#section-3-1.12" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.12">An IP or MPLS service that is carried by an egress-protected tunnel and hence protected by a mechanism according to this framework.<a href="#section-3-1.12" class="pilcrow">¶</a>
1338a1515
>         <dd class="break"></dd>
1341c1518
<         <dd id="section-3-1.14">Given an egress-protected tunnel and its egress router, this is another router that has connectivity with all or a subset of the destinations of the egress-protected services carried by the egress-protected tunnel.<a href="#section-3-1.14" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.14">Given an egress-protected tunnel and its egress router, this is another router that has connectivity with all or a subset of the destinations of the egress-protected services carried by the egress-protected tunnel.<a href="#section-3-1.14" class="pilcrow">¶</a>
1342a1520
>         <dd class="break"></dd>
1345c1523
<         <dd id="section-3-1.16">A service instance that is hosted by a backup egress router and corresponds to an egress-protected service on a protected egress router.<a href="#section-3-1.16" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.16">A service instance that is hosted by a backup egress router and corresponds to an egress-protected service on a protected egress router.<a href="#section-3-1.16" class="pilcrow">¶</a>
1346a1525
>         <dd class="break"></dd>
1349c1528
<         <dd id="section-3-1.18">A role acted by a router as an alternate of a protected egress router, to handle service packets in the event of an egress failure. A protector may be physically co-located with or decoupled from a backup egress router, depending on the co-located or centralized protector mode.<a href="#section-3-1.18" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.18">A role acted by a router as an alternate of a protected egress router, to handle service packets in the event of an egress failure. A protector may be physically co-located with or decoupled from a backup egress router, depending on the co-located or centralized protector mode.<a href="#section-3-1.18" class="pilcrow">¶</a>
1350a1530
>         <dd class="break"></dd>
1353c1533
<         <dd id="section-3-1.20">A service instance hosted by a protector that corresponds to the service instance of an egress-protected service on a protected egress router. A protection service instance is a backup service instance, if the protector is co-located with a backup egress router.<a href="#section-3-1.20" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.20">A service instance hosted by a protector that corresponds to the service instance of an egress-protected service on a protected egress router. A protection service instance is a backup service instance, if the protector is co-located with a backup egress router.<a href="#section-3-1.20" class="pilcrow">¶</a>
1354a1535
>         <dd class="break"></dd>
1357c1538
<         <dd id="section-3-1.22"> A router at the point of local repair. In egress node protection, it is the penultimate hop router on an egress-protected tunnel. In egress link protection, it is the egress router of the egress-protected tunnel.<a href="#section-3-1.22" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.22"> A router at the point of local repair. In egress node protection, it is the penultimate hop router on an egress-protected tunnel. In egress link protection, it is the egress router of the egress-protected tunnel.<a href="#section-3-1.22" class="pilcrow">¶</a>
1358a1540
>         <dd class="break"></dd>
1361c1543
<         <dd id="section-3-1.24"> A virtual node consisting of an ordered pair of egress router E and protector P. It serves as the virtual destination of an egress-protected tunnel and as the virtual location of the egress-protected services carried by the tunnel.<a href="#section-3-1.24" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.24"> A virtual node consisting of an ordered pair of egress router E and protector P. It serves as the virtual destination of an egress-protected tunnel and as the virtual location of the egress-protected services carried by the tunnel.<a href="#section-3-1.24" class="pilcrow">¶</a>
1362a1545
>         <dd class="break"></dd>
1365c1548
<         <dd id="section-3-1.26">A globally unique IP address assigned to a protected egress {E, P}.<a href="#section-3-1.26" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.26">A globally unique IP address assigned to a protected egress {E, P}.<a href="#section-3-1.26" class="pilcrow">¶</a>
1366a1550
>         <dd class="break"></dd>
1369c1553
<         <dd id="section-3-1.28">A non-reserved label assigned to a context ID by a protector.<a href="#section-3-1.28" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.28">A non-reserved label assigned to a context ID by a protector.<a href="#section-3-1.28" class="pilcrow">¶</a>
1370a1555
>         <dd class="break"></dd>
1373c1558
<         <dd id="section-3-1.30">A tunnel used to reroute service packets around an egress failure.<a href="#section-3-1.30" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.30">A tunnel used to reroute service packets around an egress failure.<a href="#section-3-1.30" class="pilcrow">¶</a>
1374a1560
>         <dd class="break"></dd>
1377c1563
<         <dd id="section-3-1.32">The scenario where a protector and a backup egress router are co-located as one router; hence, each backup service instance serves as a protection service instance.<a href="#section-3-1.32" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.32">The scenario where a protector and a backup egress router are co-located as one router; hence, each backup service instance serves as a protection service instance.<a href="#section-3-1.32" class="pilcrow">¶</a>
1378a1565
>         <dd class="break"></dd>
1381c1568
<         <dd id="section-3-1.34">The scenario where a protector is a dedicated router and is decoupled from backup egress routers.<a href="#section-3-1.34" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.34">The scenario where a protector is a dedicated router and is decoupled from backup egress routers.<a href="#section-3-1.34" class="pilcrow">¶</a>
1382a1570
>         <dd class="break"></dd>
1385c1573
<         <dd id="section-3-1.36">Label switching performed by a protector in the label space of an egress router indicated by a context label.<a href="#section-3-1.36" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.36">Label switching performed by a protector in the label space of an egress router indicated by a context label.<a href="#section-3-1.36" class="pilcrow">¶</a>
1386a1575
>         <dd class="break"></dd>
1389c1578
<         <dd id="section-3-1.38">IP forwarding performed by a protector in the IP address space of an egress router indicated by a context label.<a href="#section-3-1.38" class="pilcrow">¶</a>
---
>         <dd style="margin-left: 1.5em" id="section-3-1.38">IP forwarding performed by a protector in the IP address space of an egress router indicated by a context label.<a href="#section-3-1.38" class="pilcrow">¶</a>
1390a1580
>       <dd class="break"></dd>
1401,1402c1591,1592
< <ul>
< <li id="section-4-2.1">
---
> <ul class="normal">
> <li class="normal" id="section-4-2.1">
1405c1595
<         <li id="section-4-2.2">
---
>         <li class="normal" id="section-4-2.2">
1408c1598
<         <li id="section-4-2.3">
---
>         <li class="normal" id="section-4-2.3">
1411c1601
<         <li id="section-4-2.4">
---
>         <li class="normal" id="section-4-2.4">
1414c1604
<         <li id="section-4-2.5">
---
>         <li class="normal" id="section-4-2.5">
1417c1607
<         <li id="section-4-2.6">
---
>         <li class="normal" id="section-4-2.6">
1420c1610
<         <li id="section-4-2.7">
---
>         <li class="normal" id="section-4-2.7">
1423c1613
<         <li id="section-4-2.8">
---
>         <li class="normal" id="section-4-2.8">
1443c1633
<           <div class="artwork art-text alignCenter art-ascii-art" id="section-5.1-2.1">
---
>           <div class="alignCenter art-ascii-art art-text artwork" id="section-5.1-2.1">
1481,1482c1671,1672
< <ul>
< <li id="section-5.2-3.1">
---
> <ul class="normal">
> <li class="normal" id="section-5.2-3.1">
1485c1675
<           <li id="section-5.2-3.2">
---
>           <li class="normal" id="section-5.2-3.2">
1488c1678
< <ol start="1" type="1" class="normal" id="section-5.2-3.2.2">
---
> <ol start="1" type="1" class="normal type-1" id="section-5.2-3.2.2">
1523c1713
<        A given egress router E may be the tail end of multiple tunnels. In general, the tunnels may be protected by multiple protectors, e.g., P1, P2, and so on, with each Pi protecting a subset of the tunnels. Thus, these routers form multiple protected egresses, i.e., {E, P1}, {E, P2}, and so on. Each tunnel is associated with one and only one protected egress {E, Pi}.  All the services carried by the tunnel are then automatically associated with the protected egress {E, Pi}. Conversely, a service associated with a protected egress {E, Pi} <span class="bcp14">MUST</span> be carried by a tunnel associated with the protected egress {E, Pi}. This mapping <span class="bcp14">MUST</span> be ensured by the ingress router of the tunnel and the service (<a href="#ep-tunnel-service" class="xref">Section 5.5</a>).<a href="#section-5.4-2" class="pilcrow">¶</a></p>
---
>        A given egress router E may be the tail end of multiple tunnels. In general, the tunnels may be protected by multiple protectors, e.g., P1, P2, and so on, with each Pi protecting a subset of the tunnels. Thus, these routers form multiple protected egresses, i.e., {E, P1}, {E, P2}, and so on. Each tunnel is associated with one and only one protected egress {E, Pi}.  All the services carried by the tunnel are then automatically associated with the protected egress {E, Pi}. Conversely, a service associated with a protected egress {E, Pi} <span class="bcp14">MUST</span> be carried by a tunnel associated with the protected egress {E, Pi}. This mapping <span class="bcp14">MUST</span> be ensured by the ingress router of the tunnel and the service (<a href="#ep-tunnel-service" class="auto internal xref">Section 5.5</a>).<a href="#section-5.4-2" class="pilcrow">¶</a></p>
1542c1732
<   An egress-protected service <span class="bcp14">MUST</span> be mapped to an egress-protected tunnel by its ingress router, based on the common protected egress {E, P} of the service and the tunnel. This is achieved by introducing the notion of a "context ID" for a protected egress {E, P}, as described in <a href="#cid" class="xref">Section 5.7</a>.<a href="#section-5.5-5" class="pilcrow">¶</a></p>
---
>   An egress-protected service <span class="bcp14">MUST</span> be mapped to an egress-protected tunnel by its ingress router, based on the common protected egress {E, P} of the service and the tunnel. This is achieved by introducing the notion of a "context ID" for a protected egress {E, P}, as described in <a href="#cid" class="auto internal xref">Section 5.7</a>.<a href="#section-5.5-5" class="pilcrow">¶</a></p>
1564c1754
<   In this framework, a globally unique IPv4 or IPv6 address is assigned as the identifier of the protected egress {E, P}. It is called a "context ID" due to its specific usage in context label switching and context IP forwarding on the protector. It is an IP address that is logically owned by both the egress router and the protector. For the egress router, it indicates the protector. For the protector, it indicates the egress router, particularly the egress router's forwarding context. For other routers in the network, it is an address reachable via both the egress router and the protector (<a href="#adv" class="xref">Section 5.8</a>), similar to an anycast address.<a href="#section-5.7-1" class="pilcrow">¶</a></p>
---
>   In this framework, a globally unique IPv4 or IPv6 address is assigned as the identifier of the protected egress {E, P}. It is called a "context ID" due to its specific usage in context label switching and context IP forwarding on the protector. It is an IP address that is logically owned by both the egress router and the protector. For the egress router, it indicates the protector. For the protector, it indicates the egress router, particularly the egress router's forwarding context. For other routers in the network, it is an address reachable via both the egress router and the protector (<a href="#adv" class="auto internal xref">Section 5.8</a>), similar to an anycast address.<a href="#section-5.7-1" class="pilcrow">¶</a></p>
1567,1568c1757,1758
< <ul>
< <li id="section-5.7-3.1">
---
> <ul class="normal">
> <li class="normal" id="section-5.7-3.1">
1571c1761
<           <li id="section-5.7-3.2">
---
>           <li class="normal" id="section-5.7-3.2">
1574c1764
<           <li id="section-5.7-3.3">
---
>           <li class="normal" id="section-5.7-3.3">
1577c1767
<           <li id="section-5.7-3.4">
---
>           <li class="normal" id="section-5.7-3.4">
1580c1770
<           <li id="section-5.7-3.5">
---
>           <li class="normal" id="section-5.7-3.5">
1583c1773
<           <li id="section-5.7-3.6">
---
>           <li class="normal" id="section-5.7-3.6">
1586c1776
<           <li id="section-5.7-3.7">
---
>           <li class="normal" id="section-5.7-3.7">
1588c1778
<    Equivalence Class (FEC). If the bypass tunnel is established by the PLR in a hierarchical manner, the PLR treats the context label as a one-hop LSP over a regular bypass tunnel to P (e.g., a bypass tunnel to P's loopback IP address). If the bypass tunnel is constructed by using Segment Routing, the bypass tunnel is represented by a stack of Segment Identifier (SID) labels with the context label as the inner-most SID label (<a href="#bypass-estb" class="xref">Section 5.9</a>). In any case, the bypass tunnel is an ultimate hop-popping (UHP) tunnel whose incoming label on P is the context label.<a href="#section-5.7-3.7" class="pilcrow">¶</a>
---
>    Equivalence Class (FEC). If the bypass tunnel is established by the PLR in a hierarchical manner, the PLR treats the context label as a one-hop LSP over a regular bypass tunnel to P (e.g., a bypass tunnel to P's loopback IP address). If the bypass tunnel is constructed by using Segment Routing, the bypass tunnel is represented by a stack of Segment Identifier (SID) labels with the context label as the inner-most SID label (<a href="#bypass-estb" class="auto internal xref">Section 5.9</a>). In any case, the bypass tunnel is an ultimate hop-popping (UHP) tunnel whose incoming label on P is the context label.<a href="#section-5.7-3.7" class="pilcrow">¶</a>
1590c1780
<           <li id="section-5.7-3.8">
---
>           <li class="normal" id="section-5.7-3.8">
1605,1607c1795,1797
< <ul class="ulEmpty">
< <li class="ulEmpty" id="section-5.8-3.1">
<             <ol start="1" type="1" class="normal" id="section-5.8-3.1.1">
---
> <ul class="normal ulEmpty">
> <li class="normal ulEmpty" id="section-5.8-3.1">
>             <ol start="1" type="1" class="normal type-1" id="section-5.8-3.1.1">
1619,1620c1809,1810
< PLR can establish an egress-protection bypass tunnel in several manners (<a href="#bypass-estb" class="xref">Section 5.9</a>). The "context ID label binding" advertisement is
< defined as the IGP Mirroring Context segment in <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span> and <span>[<a href="#RFC8667" class="xref">RFC8667</a>]</span>. These IGP extensions are generic in nature and hence can be used for egress protection purposes. It is <span class="bcp14">RECOMMENDED</span> that a similar advertisement be defined for OSPF as well.<a href="#section-5.8-3.1.1.2" class="pilcrow">¶</a>
---
> PLR can establish an egress-protection bypass tunnel in several manners (<a href="#bypass-estb" class="auto internal xref">Section 5.9</a>). The "context ID label binding" advertisement is
> defined as the IGP Mirroring Context segment in <span>[<a href="#RFC8402" class="cite xref">RFC8402</a>]</span> and <span>[<a href="#RFC8667" class="cite xref">RFC8667</a>]</span>. These IGP extensions are generic in nature and hence can be used for egress protection purposes. It is <span class="bcp14">RECOMMENDED</span> that a similar advertisement be defined for OSPF as well.<a href="#section-5.8-3.1.1.2" class="pilcrow">¶</a>
1640c1830
<   A PLR <span class="bcp14">MUST</span> know the context ID of a protected egress {E, P} in order to establish an egress-protection bypass tunnel. The information is obtained from the signaling or label distribution protocol of the egress-protected tunnel. The PLR may or may not need to have the knowledge of the egress-protection schema. All it does is set up a bypass tunnel to a context ID while avoiding the next-hop router (i.e., egress router). This is achievable by using a constraint-based computation algorithm similar to those commonly used for traffic engineering paths and Loop-Free Alternate (LFA) paths. Since the context ID is advertised in the routing domain and in the TE domain by IGP according to <a href="#adv" class="xref">Section 5.8</a>, the PLR is able to resolve or establish such a bypass path with the protector as the tail end. In the case of proxy mode, the PLR may do so in the same manner as transit node protection.<a href="#section-5.9-1" class="pilcrow">¶</a></p>
---
>   A PLR <span class="bcp14">MUST</span> know the context ID of a protected egress {E, P} in order to establish an egress-protection bypass tunnel. The information is obtained from the signaling or label distribution protocol of the egress-protected tunnel. The PLR may or may not need to have the knowledge of the egress-protection schema. All it does is set up a bypass tunnel to a context ID while avoiding the next-hop router (i.e., egress router). This is achievable by using a constraint-based computation algorithm similar to those commonly used for traffic engineering paths and Loop-Free Alternate (LFA) paths. Since the context ID is advertised in the routing domain and in the TE domain by IGP according to <a href="#adv" class="auto internal xref">Section 5.8</a>, the PLR is able to resolve or establish such a bypass path with the protector as the tail end. In the case of proxy mode, the PLR may do so in the same manner as transit node protection.<a href="#section-5.9-1" class="pilcrow">¶</a></p>
1643,1645c1833,1835
< <ul class="ulEmpty">
< <li class="ulEmpty" id="section-5.9-3.1">
<             <ol start="1" type="1" class="normal" id="section-5.9-3.1.1">
---
> <ul class="normal ulEmpty">
> <li class="normal ulEmpty" id="section-5.9-3.1">
>             <ol start="1" type="1" class="normal type-1" id="section-5.9-3.1.1">
1650c1840
<               <li id="section-5.9-3.1.1.3">It may be constructed as a hierarchical tunnel. When the protector uses the alias mode (<a href="#adv" class="xref">Section 5.8</a>), the PLR will have the knowledge of the context ID, context label, and protector (i.e., the advertiser). The PLR can then establish the bypass tunnel in a hierarchical manner, with the context label as a one-hop LSP over a regular bypass tunnel to the protector's IP address (e.g., loopback address). This regular bypass tunnel may be established by RSVP, LDP, Segment Routing, or another protocol.<a href="#section-5.9-3.1.1.3" class="pilcrow">¶</a>
---
>               <li id="section-5.9-3.1.1.3">It may be constructed as a hierarchical tunnel. When the protector uses the alias mode (<a href="#adv" class="auto internal xref">Section 5.8</a>), the PLR will have the knowledge of the context ID, context label, and protector (i.e., the advertiser). The PLR can then establish the bypass tunnel in a hierarchical manner, with the context label as a one-hop LSP over a regular bypass tunnel to the protector's IP address (e.g., loopback address). This regular bypass tunnel may be established by RSVP, LDP, Segment Routing, or another protocol.<a href="#section-5.9-3.1.1.3" class="pilcrow">¶</a>
1681c1871
< specified in separate documents. As an example, the LDP extensions for pseudowire services are specified in <span>[<a href="#RFC8104" class="xref">RFC8104</a>]</span>.<a href="#section-5.11-3" class="pilcrow">¶</a></p>
---
> specified in separate documents. As an example, the LDP extensions for pseudowire services are specified in <span>[<a href="#RFC8104" class="cite xref">RFC8104</a>]</span>.<a href="#section-5.11-3" class="pilcrow">¶</a></p>
1695c1885
<           <div class="artwork art-text alignCenter art-ascii-art" id="section-5.12-3.1">
---
>           <div class="alignCenter art-ascii-art art-text artwork" id="section-5.12-3.1">
1738c1928
<        Egress link protection is achievable through procedures similar to that of egress node protection. In normal situations, an egress router forwards service packets to a service destination based on a service label, whose forwarding state points to an egress link. In egress link protection, the egress router acts as the PLR and performs local failure detection and local repair. Specifically, the egress router pre-establishes an egress-protection bypass tunnel to a protector and sets up the bypass forwarding state for the service label to point to the bypass tunnel. During local repair, the egress router reroutes service packets via the bypass tunnel to the protector. The protector in turn forwards the packets to the service destination (in the co-located protector mode, as shown in <a href="#Figure-3" class="xref">Figure 3</a>) or forwards the packets to a backup egress router (in the centralized protector mode, as shown in <a href="#Figure-4" class="xref">Figure 4</a>).<a href="#section-6-1" class="pilcrow">¶</a></p>
---
>        Egress link protection is achievable through procedures similar to that of egress node protection. In normal situations, an egress router forwards service packets to a service destination based on a service label, whose forwarding state points to an egress link. In egress link protection, the egress router acts as the PLR and performs local failure detection and local repair. Specifically, the egress router pre-establishes an egress-protection bypass tunnel to a protector and sets up the bypass forwarding state for the service label to point to the bypass tunnel. During local repair, the egress router reroutes service packets via the bypass tunnel to the protector. The protector in turn forwards the packets to the service destination (in the co-located protector mode, as shown in <a href="#Figure-3" class="auto internal xref">Figure 3</a>) or forwards the packets to a backup egress router (in the centralized protector mode, as shown in <a href="#Figure-4" class="auto internal xref">Figure 4</a>).<a href="#section-6-1" class="pilcrow">¶</a></p>
1741c1931
<         <div class="artwork art-text alignCenter art-ascii-art" id="section-6-2.1">
---
>         <div class="alignCenter art-ascii-art art-text artwork" id="section-6-2.1">
1771c1961
<         <div class="artwork art-text alignCenter art-ascii-art" id="section-6-3.1">
---
>         <div class="alignCenter art-ascii-art art-text artwork" id="section-6-3.1">
1801,1804c1991,1994
< <ul class="ulEmpty">
< <li class="ulEmpty" id="section-6-5.1">
<           <ol start="1" type="1" class="normal" id="section-6-5.1.1">
<             <li id="section-6-5.1.1.1">The first approach applies when the egress router does not know the service label allocated by the backup egress router. In this case, the egress router sets up the bypass forwarding state as a label push with the outgoing label of the egress-protection bypass tunnel. Rerouted packets will have the egress router's service label intact. Therefore, the protector <span class="bcp14">MUST</span> perform context label switching, and the bypass tunnel <span class="bcp14">MUST</span> be destined for the context ID of the protected egress {E, P} and established as described in <a href="#bypass-estb" class="xref">Section 5.9</a>. This approach is consistent with egress node protection. Hence, a protector can serve in egress node protection and egress link protection in a consistent manner, and both the co-located protector mode and the centralized protector mode are supported (see Figures <a href="#Figure-3" class="xref">3</a> and <a href="#Figure-4" class="xref">4</a>).<a href="#section-6-5.1.1.1" class="pilcrow">¶</a>
---
> <ul class="normal ulEmpty">
> <li class="normal ulEmpty" id="section-6-5.1">
>           <ol start="1" type="1" class="normal type-1" id="section-6-5.1.1">
>             <li id="section-6-5.1.1.1">The first approach applies when the egress router does not know the service label allocated by the backup egress router. In this case, the egress router sets up the bypass forwarding state as a label push with the outgoing label of the egress-protection bypass tunnel. Rerouted packets will have the egress router's service label intact. Therefore, the protector <span class="bcp14">MUST</span> perform context label switching, and the bypass tunnel <span class="bcp14">MUST</span> be destined for the context ID of the protected egress {E, P} and established as described in <a href="#bypass-estb" class="auto internal xref">Section 5.9</a>. This approach is consistent with egress node protection. Hence, a protector can serve in egress node protection and egress link protection in a consistent manner, and both the co-located protector mode and the centralized protector mode are supported (see Figures <a href="#Figure-3" class="auto internal xref">3</a> and <a href="#Figure-4" class="auto internal xref">4</a>).<a href="#section-6-5.1.1.1" class="pilcrow">¶</a>
1849c2039
<         <div class="artwork art-text alignCenter art-ascii-art" id="section-10-2.1">
---
>         <div class="alignCenter art-ascii-art art-text artwork" id="section-10-2.1">
1894c2084
<   PE2 serves as the PLR for egress link protection. It has already learned PE3's IPv4 VPN label 10000 and IPv6 VPN label 10001. Hence, it uses approach (2) as described in <a href="#link-protection" class="xref">Section 6</a> to set up the bypass forwarding state. It signals an egress-protection bypass tunnel to PE3, by using the path PE2-&gt;R3-&gt;PE3, and PE3's IP address as the destination. After the bypass tunnel comes up, PE2 installs a bypass next hop for the IPv4 VPN label 9000 and a bypass next hop for the IPv6 VPN label 9001. For label 9000, the bypass next hop is a label swap to label 10000, followed by a label push with the outgoing label of the bypass tunnel. For label 9001, the bypass next hop is a label swap to label 10001, followed by a label push with the outgoing label of the bypass tunnel.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
---
>   PE2 serves as the PLR for egress link protection. It has already learned PE3's IPv4 VPN label 10000 and IPv6 VPN label 10001. Hence, it uses approach (2) as described in <a href="#link-protection" class="auto internal xref">Section 6</a> to set up the bypass forwarding state. It signals an egress-protection bypass tunnel to PE3, by using the path PE2-&gt;R3-&gt;PE3, and PE3's IP address as the destination. After the bypass tunnel comes up, PE2 installs a bypass next hop for the IPv4 VPN label 9000 and a bypass next hop for the IPv6 VPN label 9001. For label 9000, the bypass next hop is a label swap to label 10000, followed by a label push with the outgoing label of the bypass tunnel. For label 9001, the bypass next hop is a label swap to label 10001, followed by a label push with the outgoing label of the bypass tunnel.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
1951c2141,2142
< <span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1954c2145,2146
< <span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1957c2149,2150
< <span class="refAuthor">Filsfils, C., Ed.</span><span class="refAuthor">, Previdi, S., Ed.</span><span class="refAuthor">, Ginsberg, L.</span><span class="refAuthor">, Decraene, B.</span><span class="refAuthor">, Litkowski, S.</span><span class="refAuthor">, and R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1960c2153,2154
< <span class="refAuthor">Previdi, S.</span><span class="refAuthor">, Ginsberg, L.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, Bashandy, A.</span><span class="refAuthor">, Gredler, H.</span><span class="refAuthor">, and B. Decraene</span>, <span class="refTitle">"IS-IS Extensions for Segment Routing"</span>, <span class="seriesInfo">RFC 8667</span>, <span class="seriesInfo">DOI 10.17487/RFC8667</span>, <time datetime="2019-12">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8667">https://www.rfc-editor.org/info/rfc8667</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bashandy, A.</span>, <span class="refAuthor">Gredler, H.</span>, and <span class="refAuthor">B. Decraene</span>, <span class="refTitle">"IS-IS Extensions for Segment Routing"</span>, <span class="seriesInfo">RFC 8667</span>, <span class="seriesInfo">DOI 10.17487/RFC8667</span>, <time datetime="2019-12" class="refDate">December 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8667">https://www.rfc-editor.org/info/rfc8667</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1970c2164,2165
< <span class="refAuthor">Bashandy, A.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, and P. Mohapatra</span>, <span class="refTitle">"BGP Prefix Independent Convergence"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-rtgwg-bgp-pic-10</span>, <time datetime="2019-10-02">2 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-rtgwg-bgp-pic-10">https://tools.ietf.org/html/draft-ietf-rtgwg-bgp-pic-10</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Bashandy, A.</span>, <span class="refAuthor">Filsfils, C.</span>, and <span class="refAuthor">P. Mohapatra</span>, <span class="refTitle">"BGP Prefix Independent Convergence"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-rtgwg-bgp-pic-10</span>, <time datetime="2019-10-02" class="refDate">2 October 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-rtgwg-bgp-pic-10">https://tools.ietf.org/html/draft-ietf-rtgwg-bgp-pic-10</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1973c2168,2169
< <span class="refAuthor">Pan, P., Ed.</span><span class="refAuthor">, Swallow, G., Ed.</span><span class="refAuthor">, and A. Atlas, Ed.</span>, <span class="refTitle">"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"</span>, <span class="seriesInfo">RFC 4090</span>, <span class="seriesInfo">DOI 10.17487/RFC4090</span>, <time datetime="2005-05">May 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4090">https://www.rfc-editor.org/info/rfc4090</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Pan, P., Ed.</span>, <span class="refAuthor">Swallow, G., Ed.</span>, and <span class="refAuthor">A. Atlas, Ed.</span>, <span class="refTitle">"Fast Reroute Extensions to RSVP-TE for LSP Tunnels"</span>, <span class="seriesInfo">RFC 4090</span>, <span class="seriesInfo">DOI 10.17487/RFC4090</span>, <time datetime="2005-05" class="refDate">May 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4090">https://www.rfc-editor.org/info/rfc4090</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1976c2172,2173
< <span class="refAuthor">Atlas, A., Ed.</span><span class="refAuthor"> and A. Zinin, Ed.</span>, <span class="refTitle">"Basic Specification for IP Fast Reroute: Loop-Free Alternates"</span>, <span class="seriesInfo">RFC 5286</span>, <span class="seriesInfo">DOI 10.17487/RFC5286</span>, <time datetime="2008-09">September 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5286">https://www.rfc-editor.org/info/rfc5286</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Atlas, A., Ed.</span> and <span class="refAuthor">A. Zinin, Ed.</span>, <span class="refTitle">"Basic Specification for IP Fast Reroute: Loop-Free Alternates"</span>, <span class="seriesInfo">RFC 5286</span>, <span class="seriesInfo">DOI 10.17487/RFC5286</span>, <time datetime="2008-09" class="refDate">September 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5286">https://www.rfc-editor.org/info/rfc5286</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1979c2176,2177
< <span class="refAuthor">Bryant, S.</span><span class="refAuthor">, Filsfils, C.</span><span class="refAuthor">, Previdi, S.</span><span class="refAuthor">, Shand, M.</span><span class="refAuthor">, and N. So</span>, <span class="refTitle">"Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)"</span>, <span class="seriesInfo">RFC 7490</span>, <span class="seriesInfo">DOI 10.17487/RFC7490</span>, <time datetime="2015-04">April 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7490">https://www.rfc-editor.org/info/rfc7490</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Shand, M.</span>, and <span class="refAuthor">N. So</span>, <span class="refTitle">"Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)"</span>, <span class="seriesInfo">RFC 7490</span>, <span class="seriesInfo">DOI 10.17487/RFC7490</span>, <time datetime="2015-04" class="refDate">April 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7490">https://www.rfc-editor.org/info/rfc7490</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1982c2180,2181
< <span class="refAuthor">Atlas, A.</span><span class="refAuthor">, Bowers, C.</span><span class="refAuthor">, and G. Enyedi</span>, <span class="refTitle">"An Architecture for IP/LDP Fast Reroute Using Maximally Redundant Trees (MRT-FRR)"</span>, <span class="seriesInfo">RFC 7812</span>, <span class="seriesInfo">DOI 10.17487/RFC7812</span>, <time datetime="2016-06">June 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7812">https://www.rfc-editor.org/info/rfc7812</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Atlas, A.</span>, <span class="refAuthor">Bowers, C.</span>, and <span class="refAuthor">G. Enyedi</span>, <span class="refTitle">"An Architecture for IP/LDP Fast Reroute Using Maximally Redundant Trees (MRT-FRR)"</span>, <span class="seriesInfo">RFC 7812</span>, <span class="seriesInfo">DOI 10.17487/RFC7812</span>, <time datetime="2016-06" class="refDate">June 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7812">https://www.rfc-editor.org/info/rfc7812</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1985c2184,2185
< <span class="refAuthor">Shen, Y.</span><span class="refAuthor">, Aggarwal, R.</span><span class="refAuthor">, Henderickx, W.</span><span class="refAuthor">, and Y. Jiang</span>, <span class="refTitle">"Pseudowire (PW) Endpoint Fast Failure Protection"</span>, <span class="seriesInfo">RFC 8104</span>, <span class="seriesInfo">DOI 10.17487/RFC8104</span>, <time datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8104">https://www.rfc-editor.org/info/rfc8104</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Shen, Y.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">Y. Jiang</span>, <span class="refTitle">"Pseudowire (PW) Endpoint Fast Failure Protection"</span>, <span class="seriesInfo">RFC 8104</span>, <span class="seriesInfo">DOI 10.17487/RFC8104</span>, <time datetime="2017-03" class="refDate">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8104">https://www.rfc-editor.org/info/rfc8104</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1988c2188,2189
< <span class="refAuthor">Chen, H.</span><span class="refAuthor">, Liu, A.</span><span class="refAuthor">, Saad, T.</span><span class="refAuthor">, Xu, F.</span><span class="refAuthor">, and L. Huang</span>, <span class="refTitle">"Extensions to RSVP-TE for Label Switched Path (LSP) Egress Protection"</span>, <span class="seriesInfo">RFC 8400</span>, <span class="seriesInfo">DOI 10.17487/RFC8400</span>, <time datetime="2018-06">June 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8400">https://www.rfc-editor.org/info/rfc8400</a>&gt;</span>. </dd>
---
> <span class="refAuthor">Chen, H.</span>, <span class="refAuthor">Liu, A.</span>, <span class="refAuthor">Saad, T.</span>, <span class="refAuthor">Xu, F.</span>, and <span class="refAuthor">L. Huang</span>, <span class="refTitle">"Extensions to RSVP-TE for Label Switched Path (LSP) Egress Protection"</span>, <span class="seriesInfo">RFC 8400</span>, <span class="seriesInfo">DOI 10.17487/RFC8400</span>, <time datetime="2018-06" class="refDate">June 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8400">https://www.rfc-editor.org/info/rfc8400</a>&gt;</span>. </dd>
> <dd class="break"></dd>
1993c2194
< <section id="section-appendix.a">
---
> <section id="appendix-A">
1997,1998c2198,2199
< <p id="section-appendix.a-1">
<        This document leverages work done by Yakov Rekhter, Kevin Wang, and Zhaohui Zhang on MPLS egress protection. Thanks to Alexander Vainshtein, Rolf Winter, Lizhong Jin, Krzysztof Szarkowicz, Roman Danyliw, and Yuanlong Jiang for their valuable comments that helped to shape this document and improve its clarity.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
---
> <p id="appendix-A-1">
>        This document leverages work done by Yakov Rekhter, Kevin Wang, and Zhaohui Zhang on MPLS egress protection. Thanks to Alexander Vainshtein, Rolf Winter, Lizhong Jin, Krzysztof Szarkowicz, Roman Danyliw, and Yuanlong Jiang for their valuable comments that helped to shape this document and improve its clarity.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
2002c2203
< <section id="section-appendix.b">
---
> <section id="appendix-B">
2077,2105c2278,2283
< <script>var toc = document.getElementById("toc");
< var tocToggle = toc.querySelector("h2");
< var tocNav = toc.querySelector("nav");
< 
< // mobile menu toggle
< tocToggle.onclick = function(event) {
<     if (window.innerWidth < 1024) {
<  var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
<  if (tocNavDisplay == "none") {
<      tocNav.style.display = "block";
<  } else {
<      tocNav.style.display = "none";
<  }
<     }
< }
< 
< // toc anchor scroll to anchor
< tocNav.addEventListener("click", function (event) {
<     event.preventDefault();
<     if (event.target.nodeName == 'A') {
<  if (window.innerWidth < 1024) {
<      tocNav.style.display = "none";
<  }
<  var href = event.target.getAttribute("href");
<  var anchorId = href.substr(1);
<  var anchor =  document.getElementById(anchorId);
<  anchor.scrollIntoView(true);
<  window.history.pushState("","",href);
<     }
---
> <script>const toc = document.getElementById("toc");
> toc.querySelector("h2").addEventListener("click", e => {
>   toc.classList.toggle("active");
> });
> toc.querySelector("nav").addEventListener("click", e => {
>   toc.classList.remove("active");
2107,2115d2284
< 
< // switch toc mode when window resized
< window.onresize = function () {
<     if (window.innerWidth < 1024) {
<  tocNav.style.display = "none";
<     } else {
<  tocNav.style.display = "block";
<     }
< }
